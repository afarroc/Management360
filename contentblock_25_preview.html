
<!DOCTYPE html>
<html lang="en">

<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Management360 platform description">
    <meta name="keywords" content="management, platform, business">
    <meta name="author" content="Management360">

    
    <title>Vista Previa - Anuncio - CMS</title>

    
    <link rel="icon" href="/static/assets/img/favicon.png">
    <link rel="apple-touch-icon" href="https://cdn.glitch.com/49d34dc6-8fbd-46bb-8221-b99ffd36f1af%2Ftouchicon-180.png?v=1566411949736">

    
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i">
    <link rel="preload" as="style" href="/static/assets/css/style.css">

    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" media="print" onload="this.media='all'">
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i">
    </noscript>

    
    <link rel="stylesheet" href="/static/assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/assets/vendor/bootstrap-icons/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/assets/vendor/boxicons/css/boxicons.min.css">
    <link rel="stylesheet" href="/static/assets/vendor/remixicon/remixicon.css">
    
    
    <link rel="stylesheet" href="/static/assets/vendor/quill/quill.snow.css">
    <link rel="stylesheet" href="/static/assets/vendor/quill/quill.bubble.css">
    <link rel="stylesheet" href="/static/assets/vendor/simple-datatables/style.css">

    
    <link rel="stylesheet" href="/static/assets/css/style.css">
    <link rel="stylesheet" href="/static/assets/css/alerts-styles.css">
    <link rel="stylesheet" href="/static/assets/css/chat.css">

    
    
    <link rel="stylesheet" href="/static/assets/css/inbox_floating_button.css">
    

    
    
<style>
.preview-container {
    background: #f8f9fa;
    min-height: 100vh;
    padding: 2rem 0;
}

.preview-card {
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    overflow: hidden;
}

.preview-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem;
}

.preview-header h1 {
    margin: 0;
    font-weight: 600;
}

.preview-content {
    padding: 2rem;
}

.block-info {
    background: #f8f9fa;
    border-radius: 10px;
    padding: 1.5rem;
    margin-bottom: 2rem;
}

.block-meta {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 1rem;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.meta-label {
    font-weight: 600;
    color: #2d3748;
}

.meta-value {
    color: #718096;
}

.block-description {
    color: #4a5568;
    line-height: 1.6;
}

.content-preview {
    border: 1px solid #e9ecef;
    border-radius: 10px;
    padding: 2rem;
    background: white;
    min-height: 300px;
}

.content-preview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e9ecef;
}

.content-preview-title {
    font-weight: 600;
    color: #2d3748;
    margin: 0;
}

.content-type-badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.content-type-html { background: #e3f2fd; color: #1565c0; }
.content-type-bootstrap { background: #e1f5fe; color: #0277bd; }
.content-type-markdown { background: #e8f5e8; color: #2e7d32; }
.content-type-json { background: #fff3e0; color: #ef6c00; }
.content-type-text { background: #f3e5f5; color: #7b1fa2; }

.rendered-content {
    line-height: 1.6;
}

/* Estilos para contenido renderizado */
.rendered-content h1,
.rendered-content h2,
.rendered-content h3,
.rendered-content h4,
.rendered-content h5,
.rendered-content h6 {
    color: #2d3748;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
}

.rendered-content h1 { font-size: 2rem; border-bottom: 2px solid #667eea; padding-bottom: 0.5rem; }
.rendered-content h2 { font-size: 1.75rem; border-bottom: 2px solid #667eea; padding-bottom: 0.5rem; }
.rendered-content h3 { font-size: 1.5rem; }
.rendered-content h4 { font-size: 1.25rem; }

.rendered-content p {
    margin-bottom: 1rem;
}

.rendered-content ul,
.rendered-content ol {
    margin-bottom: 1rem;
    padding-left: 2rem;
}

.rendered-content li {
    margin-bottom: 0.5rem;
}

.rendered-content blockquote {
    border-left: 4px solid #667eea;
    padding-left: 1rem;
    margin: 1rem 0;
    font-style: italic;
    color: #718096;
}

.rendered-content code {
    background: #f1f3f4;
    padding: 0.125rem 0.25rem;
    border-radius: 3px;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.9em;
}

.rendered-content pre {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 1rem;
    overflow-x: auto;
    margin: 1rem 0;
}

.rendered-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
}

.rendered-content th,
.rendered-content td {
    border: 1px solid #e9ecef;
    padding: 0.75rem;
    text-align: left;
}

.rendered-content th {
    background: #f8f9fa;
    font-weight: 600;
}

.rendered-content img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 1rem 0;
}

.rendered-content .alert {
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
}

.rendered-content .badge {
    font-size: 0.75rem;
    padding: 0.375rem 0.5rem;
    border-radius: 4px;
}

.raw-content {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 1rem;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.875rem;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 300px;
    overflow-y: auto;
}

.preview-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-top: 2rem;
    flex-wrap: wrap;
}

.btn-preview-action {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.3s ease;
}

.btn-preview-action:hover {
    text-decoration: none;
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .preview-header {
        padding: 1.5rem;
    }

    .preview-content {
        padding: 1.5rem;
    }

    .block-meta {
        grid-template-columns: 1fr;
    }

    .content-preview {
        padding: 1.5rem;
    }

    .preview-actions {
        flex-direction: column;
        align-items: center;
    }

    .btn-preview-action {
        width: 100%;
        text-align: center;
    }

    .lesson-image-container {
        margin: 1rem 0;
        padding: 0.75rem;
    }

    .lesson-image {
        max-height: 250px;
    }
}

/* Para pantallas muy pequeñas */
@media (max-width: 480px) {
    .lesson-image-container {
        margin: 0.75rem 0;
        padding: 0.5rem;
    }

    .lesson-image-caption {
        font-size: 0.8rem;
        margin-top: 0.5rem;
    }
}

/* Estilos para imágenes incrustadas en content blocks */
.lesson-image-container {
    text-align: center;
    margin: 1.5rem 0;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 12px;
    border: 1px solid #e9ecef;
}

.lesson-image {
    max-width: 100%;
    height: auto;
    max-height: 400px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    object-fit: contain;
    transition: transform 0.3s ease;
}

.lesson-image:hover {
    transform: scale(1.02);
}

.lesson-image-caption {
    margin-top: 0.75rem;
    font-size: 0.9rem;
    color: #6c757d;
    font-style: italic;
}
</style>

</head>

<body data-user-authenticated="true">
    
    
<header id="header" class="header fixed-top d-flex align-items-center">
    <div class="d-flex align-items-center justify-content-between">
        <a href="/" class="logo d-flex align-items-center">
            <img src="/static/assets/img/logo.png" alt="">
            <span class="d-none d-lg-block">Management360</span>
        </a>
        <i class="bi bi-list toggle-sidebar-btn"></i>
    </div><!-- End Logo -->
    <div class="search-bar">
        <form class="search-form d-flex align-items-center" method="GET" action="/search/">
            <input type="text" name="query" placeholder="Search" 
                   title="Enter search keyword" value="">
            <button type="submit" title="Search"><i class="bi bi-search"></i></button>
        </form>
    </div><!-- End Search Bar -->
    <nav class="header-nav ms-auto">
        <ul class="d-flex align-items-center">
            <li class="nav-item d-block d-lg-none">
                <a class="nav-link nav-icon search-bar-toggle " href="#">
                    <i class="bi bi-search"></i>
                </a>
            </li><!-- End Search Icon-->
            <span> &nbsp; &nbsp;</span>
            
            <li class="nav-item dropdown">
    <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
        <i class="bi bi-coin"></i>
        <span class="badge bg-primary badge-number">8537.06</span>
    </a><!-- End Credit Icon -->
    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
        <li class="dropdown-header">
            Credit Account
            <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">Manage</span></a>
        </li>
        <li>
            <hr class="dropdown-divider">
        </li>
        <li class="notification-item">
            <i class="bi bi-wallet2 text-success"></i>
            <div>
                <h4>Recharge Credits</h4>
                <p>Add funds to your credit account.</p>
            </div>
        </li>
        <li>
            <hr class="dropdown-divider">
        </li>
        <li class="notification-item">
            <i class="bi bi-arrow-left-right text-warning"></i>
            <div>
                <h4>Transfer Credits</h4>
                <p>Send credits to another user.</p>
            </div>
        </li>
        <li>
            <hr class="dropdown-divider">
        </li>
        <li class="notification-item">
            <i class="bi bi-receipt text-info"></i>
            <div>
                <h4>Transaction History</h4>
                <p>View your credit transactions.</p>
            </div>
        </li>
        <li>
            <hr class="dropdown-divider">
        </li>
        <li class="dropdown-footer">
            <a href="#">More credit options</a>
        </li>
    </ul><!-- End Credit Dropdown Items -->
</li><!-- End Credit Nav -->

            <!-- Unified Notifications Icon -->
            <li class="nav-item dropdown">
                <a class="nav-link nav-icon position-relative" href="#" id="header-notifications-btn" data-bs-toggle="dropdown" title="Notifications">
                    <i class="bi bi-bell"></i>
                    <span id="header-notification-badge" class="badge bg-danger badge-number" style="display:none;position:absolute;top:-5px;right:-5px;">0</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications" style="min-width: 350px;max-height: 500px;overflow-y: auto;">
                    <li class="dropdown-header d-flex justify-content-between align-items-center">
                        <span>Notifications</span>
                        <button id="header-mark-all-read-btn" class="btn btn-sm btn-outline-primary" style="display: none;">Mark All Read</button>
                    </li>

                    <li id="header-notifications-list">
                        <div class="text-center p-4">
                            <i class="bi bi-bell-slash fs-1 text-muted"></i>
                            <p class="text-muted mt-2">No notifications</p>
                        </div>
                    </li>

                    <li class="dropdown-footer">
                        <a href="/chat/">View all notifications</a>
                    </li>
                </ul>
            </li>
            <!-- End Unified Notifications Icon -->

            <li class="nav-item dropdown">
                <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
                    <i class="bi bi-bell"></i>
                    <span class="badge bg-primary badge-number">4</span>
                </a><!-- End Notification Icon -->
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications">
                    <li class="dropdown-header">
                        You have 4 new notifications
                        <a href="#"><span class="badge rounded-pill bg-primary p-2 ms-2">View all</span></a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li class="notification-item">
                        <i class="bi bi-exclamation-circle text-warning"></i>
                        <div>
                            <h4>Lorem Ipsum</h4>
                            <p>Quae dolorem earum veritatis oditseno</p>
                            <p>30 min. ago</p>
                        </div>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li class="notification-item">
                        <i class="bi bi-x-circle text-danger"></i>
                        <div>
                            <h4>Atque rerum nesciunt</h4>
                            <p>Quae dolorem earum veritatis oditseno</p>
                            <p>1 hr. ago</p>
                        </div>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li class="notification-item">
                        <i class="bi bi-check-circle text-success"></i>
                        <div>
                            <h4>Sit rerum fuga</h4>
                            <p>Quae dolorem earum veritatis oditseno</p>
                            <p>2 hrs. ago</p>
                        </div>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li class="notification-item">
                        <i class="bi bi-info-circle text-primary"></i>
                        <div>
                            <h4>Dicta reprehenderit</h4>
                            <p>Quae dolorem earum veritatis oditseno</p>
                            <p>4 hrs. ago</p>
                        </div>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li class="dropdown-footer">
                        <a href="#">Show all notifications</a>
                    </li>
                </ul><!-- End Notification Dropdown Items -->
            </li><!-- End Notification Nav -->
            <li class="nav-item dropdown pe-3">
                <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
                    
                    <img src="http://192.168.18.46:8000/profile_pics/thumb-1920-29144.jpg" alt="Profile" class="rounded-circle">
                    
                    <span class="d-none d-md-block dropdown-toggle ps-2">Superusuario</span>
                </a>
                </a><!-- End Profile Image Icon -->
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
                    <li class="dropdown-header">
                        <h6>Superusuario</h6>
                        <span>AD</span>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="/cv/">
                            <i class="bi bi-person"></i>
                            <span>My Profile</span>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="/cv/editar/">
                            <i class="bi bi-gear"></i>
                            <span>Account Settings</span>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="/about/">
                            <i class="bi bi-question-circle"></i>
                            <span>Need Help?</span>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="/accounts/logout/">
                            <i class="bi bi-box-arrow-right"></i>
                            <span>Log Out</span>
                        </a>
                    </li>
                </ul><!-- End Profile Dropdown Items -->
            </li><!-- End Profile Nav -->
            
        </ul>
    </nav><!-- End Icons Navigation -->
</header><!-- End Header -->

    
    
<!-- ======= Sidebar ======= -->
<aside id="sidebar" class="sidebar">
    <ul class="sidebar-nav" id="sidebar-nav">
        <li class="nav-item">
    <a class="nav-link " href="/">
        <i class="bi bi-grid"></i>
        <span>Dashboard</span>
    </a>
</li><!-- End Dashboard Nav -->
        
        <!-- =======================================================
     OPTIMIZED PROJECTS SECTION
     ======================================================= -->
<li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#projects-nav" data-bs-toggle="collapse" href="/events/projects/">
        <i class="bi bi-calendar3-range"></i><span>Projects</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="projects-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
        <!-- Main Views -->
        <li>
            <a href="/events/projects/">
                <i class="bi bi-list-ul"></i><span>All Projects</span>
            </a>
        </li>
        <li>
            <a href="/events/projects/panel/">
                <i class="bi bi-speedometer2"></i><span>Project Panel</span>
            </a>
        </li>

        <!-- Actions -->
        
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#project-actions-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-gear"></i><span>Project Actions</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="project-actions-nav" class="nav-content collapse" data-bs-parent="#projects-nav">
                <li>
                    <a href="/events/projects/create/">
                        <i class="bi bi-plus-circle"></i><span>Create Project</span>
                    </a>
                </li>
                <li>
                    <a href="/events/projects/edit/">
                        <i class="bi bi-pencil"></i><span>Edit Project</span>
                    </a>
                </li>
                <li>
                    <a href="/events/projects/activate/">
                        <i class="bi bi-play-circle"></i><span>Activate Project</span>
                    </a>
                </li>
            </ul>
        </li>

        <!-- Templates -->
        <li>
            <a href="/events/templates/">
                <i class="bi bi-file-earmark-plus"></i><span>Project Templates</span>
            </a>
        </li>

        <!-- Reports -->
        <li>
            <a href="/events/projects/export/">
                <i class="bi bi-download"></i><span>Export Projects</span>
            </a>
        </li>
        
    </ul>
</li><!-- End Optimized Projects Nav -->

        <!-- =======================================================
     OPTIMIZED TASKS SECTION
     ======================================================= -->
<li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#tasks-nav" data-bs-toggle="collapse" href="/events/tasks/">
        <i class="bi bi-calendar-check"></i><span>Tasks</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="tasks-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">

        <!-- Main Views -->
        <li>
            <a href="/events/tasks/">
                <i class="bi bi-list-ul"></i><span>All Tasks</span>
            </a>
        </li>
        <li>
            <a href="/events/tasks/panel/">
                <i class="bi bi-speedometer2"></i><span>Task Panel</span>
            </a>
        </li>

        <!-- Actions -->
        
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#task-actions-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-gear"></i><span>Task Actions</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="task-actions-nav" class="nav-content collapse" data-bs-parent="#tasks-nav">
                <li>
                    <a href="/events/tasks/create/">
                        <i class="bi bi-plus-circle"></i><span>Create Task</span>
                    </a>
                </li>
                <li>
                    <a href="/events/tasks/edit/">
                        <i class="bi bi-pencil"></i><span>Edit Task</span>
                    </a>
                </li>
                <li>
                    <a href="/events/tasks/activate/">
                        <i class="bi bi-play-circle"></i><span>Activate Task</span>
                    </a>
                </li>
            </ul>
        </li>

        <!-- Advanced Task Features -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#task-advanced-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-diagram-3"></i><span>Advanced Features</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="task-advanced-nav" class="nav-content collapse" data-bs-parent="#tasks-nav">
                <li>
                    <a href="/events/dependencies/">
                        <i class="bi bi-link"></i><span>Task Dependencies</span>
                    </a>
                </li>
                <li>
                    <a href="/events/dependencies/">
                        <i class="bi bi-list-ul"></i><span>All Dependencies</span>
                    </a>
                </li>
            </ul>
        </li>

        <!-- Reports -->
        <li>
            <a href="/events/tasks/export/">
                <i class="bi bi-download"></i><span>Export Tasks</span>
            </a>
        </li>
        
    </ul>
</li><!-- End Optimized Tasks Nav -->

        <!-- =======================================================
     OPTIMIZED EVENTS SECTION
     ======================================================= -->
<li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#events-nav" data-bs-toggle="collapse" href="/events/events/">
        <i class="bi bi-calendar-event"></i><span>Events</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="events-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
        <!-- Main Views -->
        <li>
            <a href="/events/events/">
                <i class="bi bi-list-ul"></i><span>All Events</span>
            </a>
        </li>
        <li>
            <a href="/events/events/panel/">
                <i class="bi bi-speedometer2"></i><span>Event Panel</span>
            </a>
        </li>

        <!-- Actions -->
        
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#event-actions-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-gear"></i><span>Event Actions</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="event-actions-nav" class="nav-content collapse" data-bs-parent="#events-nav">
                <li>
                    <a href="/events/events/create/">
                        <i class="bi bi-plus-circle"></i><span>Create Event</span>
                    </a>
                </li>
                <li>
                    <a href="/events/events/panel/">
                        <i class="bi bi-pencil"></i><span>Edit Event</span>
                    </a>
                </li>
                <li>
                    <a href="/events/events/assign/">
                        <i class="bi bi-person-plus"></i><span>Assign Attendees</span>
                    </a>
                </li>
            </ul>
        </li>

        <!-- History & Reports -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#event-reports-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-bar-chart"></i><span>History & Reports</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="event-reports-nav" class="nav-content collapse" data-bs-parent="#events-nav">
                <li>
                    <a href="/events/events/history/">
                        <i class="bi bi-clock-history"></i><span>Event History</span>
                    </a>
                </li>
                <li>
                    <a href="/events/events/export/">
                        <i class="bi bi-download"></i><span>Export Events</span>
                    </a>
                </li>
            </ul>
        </li>
        
    </ul>
</li><!-- End Optimized Events Nav -->


        <!-- =======================================================
     OPTIMIZED MANAGEMENT SECTION
     ======================================================= -->
<li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#management-nav" data-bs-toggle="collapse" href="/events/dashboard/">
        <i class="bi bi-card-checklist"></i><span>Management</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="management-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">

        <!-- Main Dashboard -->
        <li>
            <a href="/events/dashboard/">
                <i class="bi bi-speedometer2"></i><span>Unified Dashboard</span>
            </a>
        </li>

        <!-- Core Management -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#core-management-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-diagram-3"></i><span>Core Management</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="core-management-nav" class="nav-content collapse" data-bs-parent="#management-nav">
                <li>
                    <a href="/events/management/">
                        <i class="bi bi-circle"></i><span>Management Index</span>
                    </a>
                </li>
                <li>
                    <a href="/events/panel/">
                        <i class="bi bi-circle"></i><span>Main Panel</span>
                    </a>
                </li>
            </ul>
        </li>

        <!-- Productivity Tools -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#productivity-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-lightning"></i><span>Productivity Tools</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="productivity-nav" class="nav-content collapse" data-bs-parent="#management-nav">
                <li>
                    <a href="/events/kanban/">
                        <i class="bi bi-kanban"></i><span>Kanban Board</span>
                    </a>
                </li>
                <li>
                    <a href="/events/eisenhower/">
                        <i class="bi bi-grid-3x3"></i><span>Eisenhower Matrix</span>
                    </a>
                </li>
                <li>
                    <a href="/events/inbox/">
                        <i class="bi bi-inbox"></i><span>GTD Inbox</span>
                    </a>
                </li>
            </ul>
        </li>

        <!-- Advanced Features -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#advanced-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-gear"></i><span>Advanced Features</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="advanced-nav" class="nav-content collapse" data-bs-parent="#management-nav">
                <li>
                    <a href="/events/dependencies/">
                        <i class="bi bi-link"></i><span>Task Dependencies</span>
                    </a>
                </li>
                <li>
                    <a href="/events/templates/">
                        <i class="bi bi-file-earmark-plus"></i><span>Project Templates</span>
                    </a>
                </li>
                <li>
                    <a href="/events/reminders/">
                        <i class="bi bi-bell"></i><span>Reminders</span>
                    </a>
                </li>
            </ul>
        </li>

        <!-- Quick Actions -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#quick-actions-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-bolt"></i><span>Quick Actions</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="quick-actions-nav" class="nav-content collapse" data-bs-parent="#management-nav">
                <li>
                    <a href="/events/events/create/">
                        <i class="bi bi-plus-circle"></i><span>Create Event</span>
                    </a>
                </li>
                <li>
                    <a href="/events/projects/create/">
                        <i class="bi bi-plus-circle"></i><span>Create Project</span>
                    </a>
                </li>
                <li>
                    <a href="/events/tasks/create/">
                        <i class="bi bi-plus-circle"></i><span>Create Task</span>
                    </a>
                </li>
                <li>
                    <a href="/events/templates/create/">
                        <i class="bi bi-plus-circle"></i><span>Create Template</span>
                    </a>
                </li>
            </ul>
        </li>

        <!-- Reports & Analytics -->
        <li class="nav-item">
            <a class="nav-link collapsed" data-bs-target="#reports-nav" data-bs-toggle="collapse" href="#">
                <i class="bi bi-bar-chart"></i><span>Reports & Analytics</span><i class="bi bi-chevron-down ms-auto"></i>
            </a>
            <ul id="reports-nav" class="nav-content collapse" data-bs-parent="#management-nav">
                <li>
                    <a href="/events/events/export/">
                        <i class="bi bi-download"></i><span>Export Events</span>
                    </a>
                </li>
                <li>
                    <a href="/events/projects/export/">
                        <i class="bi bi-download"></i><span>Export Projects</span>
                    </a>
                </li>
                <li>
                    <a href="/events/tasks/export/">
                        <i class="bi bi-download"></i><span>Export Tasks</span>
                    </a>
                </li>
            </ul>
        </li>

    </ul>
</li><!-- End Optimized Management Nav -->

        <li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#cv-nav" data-bs-toggle="collapse" href="/cv/">
        <i class="bi bi-calendar"></i><span>Profile</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="cv-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">

        <li>
            <a href="/cv/">
                <i class="bi bi-circle"></i><span>My Profile</span>
            </a>
        </li>
        <li>
            <a href="/cv/editar/">
                <i class="bi bi-circle"></i><span>Profile Edit</span>
            </a>
        </li>

  
    </ul>
</li><!-- End cv Nav -->

        <li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#reports-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-file-earmark-spreadsheet"></i><span>Reports</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="reports-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
        <li>
            <a href="/kpis/">
                <i class="bi bi-graph-up"></i><span>KPI Home</span>
            </a>
        </li>
        <li>
            <a href="/kpis/dashboard/">
                <i class="bi bi-bar-chart-line"></i><span>AHT Dashboard</span>
            </a>
        </li>
        
        <li>
            <a href="/kpis/generate-data/">
                <i class="bi bi-file-pdf"></i><span>Generate Data</span>
            </a>
        </li>
        <li>
            <a href="/tools/upload-data/upload/">
                <i class="bi bi-upload"></i><span>Upload data</span>
            </a>
        </li>
        
    </ul>
</li><!-- End Reports Nav -->
        <li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#rooms-nav" data-bs-toggle="collapse" href="/rooms/">
        <i class="bi bi-columns-gap"></i><span>rooms</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="rooms-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
            <a href="/rooms/">
                <i class="bi bi-circle"></i><span>Lobbby</span>
            </a>
        </li>
        <li>
            <a href="/rooms/rooms/">
                <i class="bi bi-circle"></i><span>Rooms</span>
            </a>
        </li>
        
        <li>
            <a href="/rooms/rooms/create/">
                <i class="bi bi-circle"></i><span>Create room</span>
            </a>
        </li>
        <li>
            <a href="/rooms/entrance-exits/">
                <i class="bi bi-circle"></i><span>Entrances</span>
            </a>
        </li>
        <li>
            <a href="/rooms/portals/">
                <i class="bi bi-circle"></i><span>Portals</span>
            </a>
        </li>

        

    </ul>
</li><!-- End rooms Nav -->

        <li class="nav-item">

    <a class="nav-link collapsed" data-bs-target="#tools-nav" data-bs-toggle="collapse" href="/tools/upload-data/upload/">
        <i class="bi bi-calendar-event"></i><span>tools</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="tools-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
                <a href="/tools/tools/calculate_agents/">
                    <i class="bi bi-circle"></i><span>Calculate Agents</span>
                </a>
        </li>
        <li>
            <a href="/tools/tools/file-tree/">
                <i class="bi bi-circle"></i><span>File Tree</span>
                
            </a>
        </li>
        <li>
       <li>
            <a href="/tools/upload-data/upload/">
                <i class="bi bi-circle"></i><span>upload data</span>
            </a>
        </li>
        
        </li>
    </ul>
</li><!-- End tools Nav -->

        <li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#configuration-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-gear"></i><span>Configuration</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="configuration-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <!-- Crear nueva tipificación -->
        <li>
            <a href="/events/configuration/status/">
                <i class="bi bi-circle"></i><span>Status Panel</span>
            </a>
        </li>

        <!-- Gestionar classificationes -->
        <li>
            <a href="/events/configuration/status/create/">
                <i class="bi bi-circle"></i><span>Status Create</span>
            </a>
        </li>

        <!-- Divider -->
        <li>
            <hr class="dropdown-divider">

        </li>

        <!-- Crear nuevo estado -->
        <li>
            <a href="/events/configuration/status/edit/">
                <i class="bi bi-circle"></i><span>Status Edit</span>
            </a>
        </li>
    </ul>
</li><!-- End configuration Nav -->

        <li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#chat-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-chat-dots"></i><span>Chat</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="chat-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
        <li>
            <a href="/chat/">
                <i class="bi bi-circle"></i><span>General Chat</span>
            </a>
        </li>
        <li>
            <a href="/chat/ui/">
                <i class="bi bi-robot"></i><span>Chat IA</span>
            </a>
        </li>
    </ul>
</li>

        <li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#courses-nav" data-bs-toggle="collapse" href="/courses/">
        <i class="bi bi-journal-bookmark"></i><span>Cursos</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="courses-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <!-- Sección de Aprendizaje -->
        <li class="nav-heading">Aprendizaje</li>
        <li>
            <a href="/courses/courses/">
                <i class="bi bi-search"></i><span>Explorar Cursos</span>
            </a>
        </li>
        
        <li>
            <a href="/courses/dashboard/">
                <i class="bi bi-speedometer2"></i><span>Mi Dashboard</span>
            </a>
        </li>

        <!-- Sección de Gestión de Contenido (solo tutores) -->
        
        <li class="nav-heading">Gestión de Contenido</li>
        <li>
            <a href="/courses/manage/">
                <i class="bi bi-folder-fill"></i><span>Mis Cursos</span>
            </a>
        </li>
        <li>
            <a href="/courses/manage/create/">
                <i class="bi bi-plus-circle-fill"></i><span>Crear Curso</span>
            </a>
        </li>
        <li>
            <a href="/courses/modules/overview/">
                <i class="bi bi-diagram-3-fill"></i><span>Gestionar Módulos</span>
            </a>
        </li>
        

        <!-- Sección Administrativa (solo staff) -->
        
        <li class="nav-heading">Administración</li>
        <li>
            <a href="/courses/admin/">
                <i class="bi bi-shield-check"></i><span>Panel Admin</span>
            </a>
        </li>
        <li>
            <a href="/courses/admin/users/">
                <i class="bi bi-people-fill"></i><span>Gestionar Usuarios</span>
            </a>
        </li>
        <li>
            <a href="/courses/manage/categories/">
                <i class="bi bi-tags-fill"></i><span>Categorías</span>
            </a>
        </li>
        
        
    </ul>
</li><!-- End courses Nav -->

        
        <li class="nav-item">
    <a class="nav-link collapsed" data-bs-target="#accounts-nav" data-bs-toggle="collapse" href="/accounts/">
        <i class="bi bi-person-gear"></i><span>Account</span><i class="bi bi-chevron-down ms-auto"></i>
    </a>
    <ul id="accounts-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
        <li>
            <a href="/accounts/">
                <i class="bi bi-circle"></i><span>My Account</span>
            </a>
        </li>
        
        <li>
            <a href="/accounts/password-change/">
                <i class="bi bi-circle"></i><span>Change Password</span>
            </a>
        </li>
        <li>
            <a href="/accounts/logout/">
                <i class="bi bi-circle"></i><span>Log Out</span>
            </a>
        </li>
        
    </ul>
</li><!-- End Account Nav -->
        
<!-- pages.html -->

<li class="nav-heading">Pages</li>

<li class="nav-item">
    <a class="nav-link collapsed" href="/cv/">
        <i class="bi bi-person"></i>
        <span>Profile</span>
    </a>
</li><!-- End Profile Page Nav -->

<li class="nav-item">
    <a class="nav-link collapsed" href="/faq/">
        <i class="bi bi-question-circle"></i>
        <span>F.A.Q</span>
    </a>
</li><!-- End F.A.Q Page Nav -->

<li class="nav-item">
    <a class="nav-link collapsed" href="/contact/">
        <i class="bi bi-envelope"></i>
        <span>Contact</span>
    </a>
</li><!-- End Contact Page Nav -->

<li class="nav-item">
    <a class="nav-link collapsed" href="/about/">
        <i class="bi bi-info-circle"></i>
        <span>About</span>
    </a>    

</li><!-- End About Page Nav -->


    </ul>

    <style>
    /* Estilos para los encabezados de sección en la navegación */
    .nav-heading {
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: #6c757d;
        padding: 0.75rem 1rem 0.25rem 1rem;
        margin: 0.5rem 0 0.25rem 0;
        border-bottom: 1px solid rgba(108, 117, 125, 0.2);
    }

    .nav-heading:first-child {
        margin-top: 0;
    }

    /* Mejorar el espaciado de los elementos de navegación */
    .sidebar-nav .nav-item .nav-content li {
        margin-bottom: 0.125rem;
    }

    .sidebar-nav .nav-item .nav-content li a {
        padding: 0.5rem 1rem 0.5rem 2.5rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
    }

    .sidebar-nav .nav-item .nav-content li a:hover {
        background-color: rgba(13, 110, 253, 0.1);
        color: #0d6efd;
    }

    /* Iconos más prominentes */
    .sidebar-nav .nav-item .nav-content li a i {
        font-size: 0.8rem;
        width: 16px;
        text-align: center;
        margin-right: 0.5rem;
        opacity: 0.8;
    }

    .sidebar-nav .nav-item .nav-content li a:hover i {
        opacity: 1;
    }
    </style>
</aside><!-- End Sidebar-->
    
    
    <main id="main" class="main">
        
        

        
        
        <div class="container-fluid">
            
            <form id="csrf-form" style="display: none;">
                <input type="hidden" name="csrfmiddlewaretoken" value="dzRWLCnyQSGzqG11sUoRYjdQ309d63cEocS1QkjsZ2MAZd6TEKQwcVbaX8qXTOrv">
            </form>

            
<div class="container mt-4">
    <!-- Barra de navegación superior responsiva -->
    <div class="row mb-4">
        <div class="col-12">
            <nav class="navbar navbar-expand-lg navbar-light bg-light rounded shadow-sm">
                <div class="container-fluid">
                    <!-- Botón para móviles -->
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#coursesNavbar" aria-controls="coursesNavbar" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <!-- Contenido del navbar -->
                    <div class="collapse navbar-collapse" id="coursesNavbar">
                        <!-- Categorías -->
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="categoriesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-tags me-1"></i>Categorías
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="categoriesDropdown">
                                    <li><a class="dropdown-item" href="/courses/courses/">
                                        <i class="fas fa-list me-2"></i>Todos los cursos
                                    </a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    
                                </ul>
                            </li>
                        </ul>

                        <!-- Acciones principales -->
                        <ul class="navbar-nav mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" href="/courses/courses/">
                                    <i class="fas fa-search me-1"></i>Explorar Cursos
                                </a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="/courses/dashboard/">
                                    <i class="fas fa-tachometer-alt me-1"></i>Mi Dashboard
                                </a>
                            </li>
                            
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="contentDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-edit me-1"></i>Gestión
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="contentDropdown">
                                    <li><a class="dropdown-item" href="/courses/manage/">
                                        <i class="fas fa-folder-fill me-2"></i>Mis Cursos
                                    </a></li>
                                    <li><a class="dropdown-item" href="/courses/manage/create/wizard/">
                                        <i class="fas fa-plus-circle me-2"></i>Crear Curso
                                    </a></li>
                                    <li><a class="dropdown-item" href="/courses/modules/overview/">
                                        <i class="fas fa-diagram-3 me-2"></i>Módulos
                                    </a></li>
                                </ul>
                            </li>
                            
                            
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-shield-alt me-1"></i>Admin
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="adminDropdown">
                                    <li><a class="dropdown-item" href="/courses/admin/">
                                        <i class="fas fa-tachometer-alt me-2"></i>Panel Admin
                                    </a></li>
                                    <li><a class="dropdown-item" href="/courses/admin/users/">
                                        <i class="fas fa-users me-2"></i>Usuarios
                                    </a></li>
                                    <li><a class="dropdown-item" href="/courses/manage/categories/">
                                        <i class="fas fa-tags me-2"></i>Categorías
                                    </a></li>
                                </ul>
                            </li>
                            
                            
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            
            
            

            
<div class="preview-container">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <!-- Header -->
                <div class="preview-card">
                    <div class="preview-header">
                        <h1><i class="bi bi-eye me-3"></i>Vista Previa - Anuncio</h1>
                    </div>

                    <div class="preview-content">
                        <!-- Información del bloque -->
                        <div class="block-info">
                            <div class="block-meta">
                                <div class="meta-item">
                                    <span class="meta-label">Tipo:</span>
                                    <span class="meta-value">JSON Estructurado</span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label">Autor:</span>
                                    <span class="meta-value">Superusuario</span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label">Categoría:</span>
                                    <span class="meta-value">anuncio</span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label">Usos:</span>
                                    <span class="meta-value">0</span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label">Creado:</span>
                                    <span class="meta-value">24 Sep 2025</span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label">Actualizado:</span>
                                    <span class="meta-value">24 Sep 2025 09:47</span>
                                </div>
                            </div>

                            
                            <div class="block-description">
                                <strong>Descripción:</strong> anuncio
                            </div>
                            

                            
                            <div class="mt-2">
                                <strong>Etiquetas:</strong>
                                
                                <span class="badge bg-secondary me-1">ad</span>
                                
                                <span class="badge bg-secondary me-1">spam</span>
                                
                                <span class="badge bg-secondary me-1">announce</span>
                                
                            </div>
                            

                            <div class="mt-2">
                                
                                
                                <span class="badge bg-success">
                                    <i class="bi bi-globe me-1"></i>Público
                                </span>
                                
                            </div>
                        </div>

                        <!-- Contenido renderizado -->
                        <div class="content-preview">
                            <div class="content-preview-header">
                                <h3 class="content-preview-title">Contenido Renderizado</h3>
                                <span class="content-type-badge content-type-json">
                                    JSON Estructurado
                                </span>
                            </div>

                            <div class="rendered-content">
                                
                                
                                    <div class="ad-banner-container bg-primary text-white p-4 rounded mb-4">
<h3 class="ad-banner-title mb-3">🚀 ¡Lleva tu Álgebra al Siguiente Nivel!</h3>
<h4 class="ad-banner-header">¿Te está gustando el curso?</h4>
<p class="ad-banner-subheader mb-3">Descubre todas las ventajas de la versión PREMIUM</p>
<ul class="ad-features list-unstyled">
<li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i>💻 **Acceso ilimitado** a todos los módulos y lecciones</li>
<li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i>🎯 **Ejercicios personalizados** con inteligencia artificial</li>
<li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i>📊 **Certificado oficial** al completar el curso</li>
<li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i>👨‍🏫 **Soporte prioritario** de tutores especializados</li>
<li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i>📱 **Descarga offline** para estudiar sin conexión</li>
<li class="mb-2"><i class="bi bi-check-circle-fill me-2"></i>⚡ **Simuladores interactivos** y herramientas avanzadas</li>
</ul>
<div class="ad-offer bg-warning text-dark p-2 rounded my-3"><strong>**OFERTA ESPECIAL:** 40% de descuento por tiempo limitado</strong></div>
<div class="ad-price mb-3">
<span class="original-price text-decoration-line-through me-2">$99.000</span>
<span class="discounted-price fw-bold fs-4 text-success">$59.400</span>
<small class="text-muted d-block">acceso vitalicio</small>
</div>
<a href="#premium-upgrade" class="btn btn-success btn-lg me-2">¡QUIERO SER PREMIUM!</a>
<a href="#premium-features" class="btn btn-outline-light">Ver planes y características</a>
</div>
<div class="ad-card-container card border-primary mb-4">
<div class="card-body">
<h5 class="card-title text-primary">📚 ¿Necesitas Más Práctica?</h5>
<h6 class="card-subtitle mb-2 text-muted">Kit de Ejercicios Premium de Álgebra</h6>
<p class="card-text">Pack exclusivo con 500+ ejercicios resueltos paso a paso, organizados por dificultad y tema.</p>
<ul class="ad-highlights">
<li>✅ **Ejercicios adicionales** para cada lección</li>
<li>✅ **Soluciones detalladas** con explicaciones</li>
<li>✅ **Exámenes por módulo** con retroalimentación</li>
<li>✅ **Problemas del mundo real** aplicados</li>
<li>✅ **Acceso inmediato** y descargable</li>
</ul>
<div class="ad-price fw-bold text-success fs-5 my-2">$19.900</div>
<span class="badge bg-warning text-dark mb-2">MÁS VENDIDO</span>
<a href="#exercise-kit" class="btn btn-primary">DESCARGAR KIT</a>
</div>
</div>
<div class="ad-alert-container alert alert-info mb-4">
<i class="bi bi-👥 me-2"></i>
<strong>¿Estudiar en Grupo?</strong><br>
**Únete a nuestra comunidad de aprendizaje:** Comparte dudas, resuelve problemas en equipo y participa en sesiones en vivo semanales.
<ul class="mb-2 mt-2">
<li>📅 **Sesiones en vivo** cada sábado</li>
<li>💬 **Foro comunitario** activo 24/7</li>
<li>👥 **Grupos de estudio** por nivel</li>
<li>🏆 **Retos y competencias** mensuales</li>
</ul>
<br><a href="#community-join" class="btn btn-sm btn-info">UNIRME A LA COMUNIDAD</a>
</div>
<div class="ad-testimonial-container card mb-4">
<div class="card-body">
<blockquote class="blockquote mb-0">
<p class="mb-2">"«Gracias a este curso pasé de tener miedo al álgebra a amar las matemáticas. Los ejercicios interactivos y las explicaciones claras hicieron toda la diferencia.»"</p>
<footer class="blockquote-footer">
<cite title="Source Title">María González</cite>
<br><small class="text-muted">Estudiante de Ingeniería</small>
<br><small class="text-warning">⭐⭐⭐⭐⭐</small>
</footer>
<div class="text-muted small mt-2">Completó el curso en 3 semanas • Calificación: 9.8/10</div>
</blockquote>
</div>
</div>
<div class="ad-countdown-container bg-dark text-white p-4 rounded mb-4 text-center">
<h4 class="mb-3">⏰ ¡Oferta Termina Pronto!</h4>
<p class="mb-3">El descuento del 40% en la versión Premium finaliza en:</p>
<div class="countdown-timer d-flex justify-content-center mb-3">
<div class="countdown-item mx-2"><span class="fs-2 fw-bold">2</span><br><small>Días</small></div>
<div class="countdown-item mx-2"><span class="fs-2 fw-bold">12</span><br><small>Horas</small></div>
<div class="countdown-item mx-2"><span class="fs-2 fw-bold">30</span><br><small>Min</small></div>
</div>
<ul class="offer-details text-start d-inline-block mb-3">
<li class="mb-1">🔓 Acceso completo a todos los módulos</li>
<li class="mb-1">📱 App premium sin anuncios</li>
<li class="mb-1">🎓 Certificado digital incluido</li>
<li class="mb-1">👨‍🏫 Soporte prioritario 24/7</li>
</ul>
<a href="#limited-offer" class="btn btn-warning btn-lg">OBTENER OFERTA</a>
</div>
<div class="ad-feature-container mb-4">
<h4 class="text-center mb-4">✨ Características Exclusivas Premium</h4>
<div class="row">
<div class="col-md-6 col-lg-3 mb-3">
<div class="feature-item text-center p-3 border rounded">
<i class="bi bi-🤖 fs-1 text-primary mb-2"></i>
<h6 class="mb-2">Tutor IA Personalizado</h6>
<p class="small text-muted">Asistente de inteligencia artificial que se adapta a tu estilo de aprendizaje</p>
</div>
</div>
<div class="col-md-6 col-lg-3 mb-3">
<div class="feature-item text-center p-3 border rounded">
<i class="bi bi-📈 fs-1 text-primary mb-2"></i>
<h6 class="mb-2">Panel de Progreso Avanzado</h6>
<p class="small text-muted">Seguimiento detallado de tu avance con métricas y recomendaciones</p>
</div>
</div>
<div class="col-md-6 col-lg-3 mb-3">
<div class="feature-item text-center p-3 border rounded">
<i class="bi bi-🎮 fs-1 text-primary mb-2"></i>
<h6 class="mb-2">Modo Juego</h6>
<p class="small text-muted">Aprende álgebra jugando con desafíos gamificados y recompensas</p>
</div>
</div>
<div class="col-md-6 col-lg-3 mb-3">
<div class="feature-item text-center p-3 border rounded">
<i class="bi bi-📋 fs-1 text-primary mb-2"></i>
<h6 class="mb-2">Generador de Exámenes</h6>
<p class="small text-muted">Crea exámenes personalizados según tus necesidades específicas</p>
</div>
</div>
</div>
<div class="text-center mt-4"><a href="#premium-demo" class="btn btn-primary">VER DEMO</a></div>
</div>
<div class="ad-comparison-container mb-4">
<h4 class="text-center mb-4">📊 ¿Cuál Plan es para Ti?</h4>
<div class="row">
<div class="col-md-4 mb-3">
<div class="plan-card card h-100 border-secondary">
<div class="card-body text-center">
<h5 class="card-title">BÁSICO</h5>
<div class="plan-price fs-3 fw-bold text-primary mb-3">Gratis</div>
<ul class="list-unstyled">
<li class="text-success"><small>✓ Acceso a primeras 3 lecciones</small></li>
<li class="text-success"><small>✓ Ejercicios limitados</small></li>
<li class="text-danger"><small>✗ Sin certificado</small></li>
<li class="text-danger"><small>✗ Soporte estándar (48h)</small></li>
<li class="text-danger"><small>✗ Contenido descargable</small></li>
<li class="text-danger"><small>✗ Herramientas avanzadas</small></li>
</ul>
<a href="#" class="btn btn-outline mt-3">COMENZAR GRATIS</a>
</div>
</div>
</div>
<div class="col-md-4 mb-3">
<div class="plan-card card h-100 border-primary popular-plan">
<div class="popular-badge bg-primary text-white text-center py-1">MÁS POPULAR</div>
<div class="card-body text-center">
<h5 class="card-title">PREMIUM</h5>
<div class="plan-price fs-3 fw-bold text-primary mb-3">$59.400</div>
<small class="text-decoration-line-through text-muted">$99.000</small>
<ul class="list-unstyled">
<li class="text-success"><small>✓ Acceso completo ILIMITADO</small></li>
<li class="text-success"><small>✓ 500+ ejercicios premium</small></li>
<li class="text-success"><small>✓ Certificado oficial</small></li>
<li class="text-success"><small>✓ Soporte prioritario 24/7</small></li>
<li class="text-success"><small>✓ Todo el contenido descargable</small></li>
<li class="text-success"><small>✓ Todas las herramientas IA</small></li>
</ul>
<a href="#" class="btn btn-primary mt-3">ELEGIR PREMIUM</a>
</div>
</div>
</div>
<div class="col-md-4 mb-3">
<div class="plan-card card h-100 border-secondary">
<div class="card-body text-center">
<h5 class="card-title">GRUPAL</h5>
<div class="plan-price fs-3 fw-bold text-primary mb-3">$199.000</div>
<ul class="list-unstyled">
<li class="text-success"><small>✓ Licencias para 5 personas</small></li>
<li class="text-success"><small>✓ Panel de gestión grupal</small></li>
<li class="text-success"><small>✓ Reportes de progreso grupal</small></li>
<li class="text-success"><small>✓ Sesiones personalizadas</small></li>
<li class="text-success"><small>✓ Descuento por volumen</small></li>
<li class="text-success"><small>✓ Ideal para empresas/colegios</small></li>
</ul>
<a href="#" class="btn btn-outline mt-3">SOLICITAR COTIZACIÓN</a>
</div>
</div>
</div>
</div>
</div>
<div class="ad-achievement-container mb-4">
<h4 class="text-center mb-4">🏆 Logros que Puedes Alcanzar</h4>
<div class="row">
<div class="col-md-3 mb-3">
<div class="badge-item text-center p-3 border rounded">
<i class="bi bi-⭐ fs-2 text-warning mb-2"></i>
<h6 class="mb-2">Dominio de Fundamentos</h6>
<p class="small text-muted">Completa el módulo 1 con 90%+ de calificación</p>
</div>
</div>
<div class="col-md-3 mb-3">
<div class="badge-item text-center p-3 border rounded">
<i class="bi bi-🔥 fs-2 text-warning mb-2"></i>
<h6 class="mb-2">Experto en Ecuaciones</h6>
<p class="small text-muted">Resuelve 100+ ecuaciones correctamente</p>
</div>
</div>
<div class="col-md-3 mb-3">
<div class="badge-item text-center p-3 border rounded">
<i class="bi bi-💎 fs-2 text-warning mb-2"></i>
<h6 class="mb-2">Maestro del Álgebra</h6>
<p class="small text-muted">Termina todo el curso con excelencia</p>
</div>
</div>
<div class="col-md-3 mb-3">
<div class="badge-item text-center p-3 border rounded">
<i class="bi bi-🚀 fs-2 text-warning mb-2"></i>
<h6 class="mb-2">Speed Learner</h6>
<p class="small text-muted">Completa el curso en menos de 4 semanas</p>
</div>
</div>
</div>
<div class="progress-container mt-4">
<div class="progress mb-2"><div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div></div>
<small class="text-muted">Has desbloqueado 3 de 12 logros posibles</small>
</div>
</div>
                                
                            </div>
                        </div>

                        <!-- Contenido crudo (opcional) -->
                        <details class="mt-3">
                            <summary class="btn btn-outline-secondary btn-sm">
                                <i class="bi bi-code-slash me-1"></i>Ver Código Fuente
                            </summary>
                            <div class="raw-content mt-2">

[{&#x27;type&#x27;: &#x27;ad_banner&#x27;, &#x27;title&#x27;: &#x27;🚀 ¡Lleva tu Álgebra al Siguiente Nivel!&#x27;, &#x27;content&#x27;: {&#x27;header&#x27;: &#x27;¿Te está gustando el curso?&#x27;, &#x27;subheader&#x27;: &#x27;Descubre todas las ventajas de la versión PREMIUM&#x27;, &#x27;features&#x27;: [&#x27;💻 **Acceso ilimitado** a todos los módulos y lecciones&#x27;, &#x27;🎯 **Ejercicios personalizados** con inteligencia artificial&#x27;, &#x27;📊 **Certificado oficial** al completar el curso&#x27;, &#x27;👨\u200d🏫 **Soporte prioritario** de tutores especializados&#x27;, &#x27;📱 **Descarga offline** para estudiar sin conexión&#x27;, &#x27;⚡ **Simuladores interactivos** y herramientas avanzadas&#x27;], &#x27;offer&#x27;: &#x27;**OFERTA ESPECIAL:** 40% de descuento por tiempo limitado&#x27;, &#x27;price&#x27;: {&#x27;original&#x27;: &#x27;$99.000&#x27;, &#x27;discounted&#x27;: &#x27;$59.400&#x27;, &#x27;period&#x27;: &#x27;acceso vitalicio&#x27;}, &#x27;cta&#x27;: {&#x27;text&#x27;: &#x27;¡QUIERO SER PREMIUM!&#x27;, &#x27;url&#x27;: &#x27;#premium-upgrade&#x27;, &#x27;color&#x27;: &#x27;success&#x27;}, &#x27;secondary_cta&#x27;: {&#x27;text&#x27;: &#x27;Ver planes y características&#x27;, &#x27;url&#x27;: &#x27;#premium-features&#x27;}}}, {&#x27;type&#x27;: &#x27;ad_card&#x27;, &#x27;title&#x27;: &#x27;📚 ¿Necesitas Más Práctica?&#x27;, &#x27;content&#x27;: {&#x27;header&#x27;: &#x27;Kit de Ejercicios Premium de Álgebra&#x27;, &#x27;description&#x27;: &#x27;Pack exclusivo con 500+ ejercicios resueltos paso a paso, organizados por dificultad y tema.&#x27;, &#x27;highlights&#x27;: [&#x27;✅ **Ejercicios adicionales** para cada lección&#x27;, &#x27;✅ **Soluciones detalladas** con explicaciones&#x27;, &#x27;✅ **Exámenes por módulo** con retroalimentación&#x27;, &#x27;✅ **Problemas del mundo real** aplicados&#x27;, &#x27;✅ **Acceso inmediato** y descargable&#x27;], &#x27;price&#x27;: &#x27;$19.900&#x27;, &#x27;badge&#x27;: &#x27;MÁS VENDIDO&#x27;, &#x27;cta&#x27;: {&#x27;text&#x27;: &#x27;DESCARGAR KIT&#x27;, &#x27;url&#x27;: &#x27;#exercise-kit&#x27;}}}, {&#x27;type&#x27;: &#x27;ad_alert&#x27;, &#x27;variant&#x27;: &#x27;info&#x27;, &#x27;content&#x27;: {&#x27;icon&#x27;: &#x27;👥&#x27;, &#x27;title&#x27;: &#x27;¿Estudiar en Grupo?&#x27;, &#x27;message&#x27;: &#x27;**Únete a nuestra comunidad de aprendizaje:** Comparte dudas, resuelve problemas en equipo y participa en sesiones en vivo semanales.&#x27;, &#x27;features&#x27;: [&#x27;📅 **Sesiones en vivo** cada sábado&#x27;, &#x27;💬 **Foro comunitario** activo 24/7&#x27;, &#x27;👥 **Grupos de estudio** por nivel&#x27;, &#x27;🏆 **Retos y competencias** mensuales&#x27;], &#x27;cta&#x27;: {&#x27;text&#x27;: &#x27;UNIRME A LA COMUNIDAD&#x27;, &#x27;url&#x27;: &#x27;#community-join&#x27;}}}, {&#x27;type&#x27;: &#x27;ad_testimonial&#x27;, &#x27;content&#x27;: {&#x27;quote&#x27;: &#x27;«Gracias a este curso pasé de tener miedo al álgebra a amar las matemáticas. Los ejercicios interactivos y las explicaciones claras hicieron toda la diferencia.»&#x27;, &#x27;author&#x27;: {&#x27;name&#x27;: &#x27;María González&#x27;, &#x27;role&#x27;: &#x27;Estudiante de Ingeniería&#x27;, &#x27;avatar&#x27;: &#x27;https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&amp;auto=format&amp;fit=crop&amp;w=100&amp;q=80&#x27;, &#x27;rating&#x27;: 5}, &#x27;achievement&#x27;: &#x27;Completó el curso en 3 semanas • Calificación: 9.8/10&#x27;}}, {&#x27;type&#x27;: &#x27;ad_countdown&#x27;, &#x27;content&#x27;: {&#x27;title&#x27;: &#x27;⏰ ¡Oferta Termina Pronto!&#x27;, &#x27;message&#x27;: &#x27;El descuento del 40% en la versión Premium finaliza en:&#x27;, &#x27;countdown&#x27;: {&#x27;days&#x27;: 2, &#x27;hours&#x27;: 12, &#x27;minutes&#x27;: 30}, &#x27;offer_details&#x27;: [&#x27;🔓 Acceso completo a todos los módulos&#x27;, &#x27;📱 App premium sin anuncios&#x27;, &#x27;🎓 Certificado digital incluido&#x27;, &#x27;👨\u200d🏫 Soporte prioritario 24/7&#x27;], &#x27;cta&#x27;: {&#x27;text&#x27;: &#x27;OBTENER OFERTA&#x27;, &#x27;url&#x27;: &#x27;#limited-offer&#x27;}}}, {&#x27;type&#x27;: &#x27;ad_feature&#x27;, &#x27;content&#x27;: {&#x27;title&#x27;: &#x27;✨ Características Exclusivas Premium&#x27;, &#x27;features&#x27;: [{&#x27;icon&#x27;: &#x27;🤖&#x27;, &#x27;title&#x27;: &#x27;Tutor IA Personalizado&#x27;, &#x27;description&#x27;: &#x27;Asistente de inteligencia artificial que se adapta a tu estilo de aprendizaje&#x27;}, {&#x27;icon&#x27;: &#x27;📈&#x27;, &#x27;title&#x27;: &#x27;Panel de Progreso Avanzado&#x27;, &#x27;description&#x27;: &#x27;Seguimiento detallado de tu avance con métricas y recomendaciones&#x27;}, {&#x27;icon&#x27;: &#x27;🎮&#x27;, &#x27;title&#x27;: &#x27;Modo Juego&#x27;, &#x27;description&#x27;: &#x27;Aprende álgebra jugando con desafíos gamificados y recompensas&#x27;}, {&#x27;icon&#x27;: &#x27;📋&#x27;, &#x27;title&#x27;: &#x27;Generador de Exámenes&#x27;, &#x27;description&#x27;: &#x27;Crea exámenes personalizados según tus necesidades específicas&#x27;}], &#x27;cta&#x27;: {&#x27;text&#x27;: &#x27;VER DEMO&#x27;, &#x27;url&#x27;: &#x27;#premium-demo&#x27;}}}, {&#x27;type&#x27;: &#x27;ad_comparison&#x27;, &#x27;content&#x27;: {&#x27;title&#x27;: &#x27;📊 ¿Cuál Plan es para Ti?&#x27;, &#x27;plans&#x27;: [{&#x27;name&#x27;: &#x27;BÁSICO&#x27;, &#x27;price&#x27;: &#x27;Gratis&#x27;, &#x27;features&#x27;: [&#x27;✓ Acceso a primeras 3 lecciones&#x27;, &#x27;✓ Ejercicios limitados&#x27;, &#x27;✗ Sin certificado&#x27;, &#x27;✗ Soporte estándar (48h)&#x27;, &#x27;✗ Contenido descargable&#x27;, &#x27;✗ Herramientas avanzadas&#x27;], &#x27;cta&#x27;: {&#x27;text&#x27;: &#x27;COMENZAR GRATIS&#x27;, &#x27;variant&#x27;: &#x27;outline&#x27;}}, {&#x27;name&#x27;: &#x27;PREMIUM&#x27;, &#x27;price&#x27;: &#x27;$59.400&#x27;, &#x27;original_price&#x27;: &#x27;$99.000&#x27;, &#x27;popular&#x27;: True, &#x27;features&#x27;: [&#x27;✓ Acceso completo ILIMITADO&#x27;, &#x27;✓ 500+ ejercicios premium&#x27;, &#x27;✓ Certificado oficial&#x27;, &#x27;✓ Soporte prioritario 24/7&#x27;, &#x27;✓ Todo el contenido descargable&#x27;, &#x27;✓ Todas las herramientas IA&#x27;], &#x27;cta&#x27;: {&#x27;text&#x27;: &#x27;ELEGIR PREMIUM&#x27;, &#x27;variant&#x27;: &#x27;primary&#x27;}}, {&#x27;name&#x27;: &#x27;GRUPAL&#x27;, &#x27;price&#x27;: &#x27;$199.000&#x27;, &#x27;features&#x27;: [&#x27;✓ Licencias para 5 personas&#x27;, &#x27;✓ Panel de gestión grupal&#x27;, &#x27;✓ Reportes de progreso grupal&#x27;, &#x27;✓ Sesiones personalizadas&#x27;, &#x27;✓ Descuento por volumen&#x27;, &#x27;✓ Ideal para empresas/colegios&#x27;], &#x27;cta&#x27;: {&#x27;text&#x27;: &#x27;SOLICITAR COTIZACIÓN&#x27;, &#x27;variant&#x27;: &#x27;outline&#x27;}}]}}, {&#x27;type&#x27;: &#x27;ad_achievement&#x27;, &#x27;content&#x27;: {&#x27;title&#x27;: &#x27;🏆 Logros que Puedes Alcanzar&#x27;, &#x27;badges&#x27;: [{&#x27;icon&#x27;: &#x27;⭐&#x27;, &#x27;title&#x27;: &#x27;Dominio de Fundamentos&#x27;, &#x27;description&#x27;: &#x27;Completa el módulo 1 con 90%+ de calificación&#x27;}, {&#x27;icon&#x27;: &#x27;🔥&#x27;, &#x27;title&#x27;: &#x27;Experto en Ecuaciones&#x27;, &#x27;description&#x27;: &#x27;Resuelve 100+ ecuaciones correctamente&#x27;}, {&#x27;icon&#x27;: &#x27;💎&#x27;, &#x27;title&#x27;: &#x27;Maestro del Álgebra&#x27;, &#x27;description&#x27;: &#x27;Termina todo el curso con excelencia&#x27;}, {&#x27;icon&#x27;: &#x27;🚀&#x27;, &#x27;title&#x27;: &#x27;Speed Learner&#x27;, &#x27;description&#x27;: &#x27;Completa el curso en menos de 4 semanas&#x27;}], &#x27;progress&#x27;: {&#x27;current&#x27;: 3, &#x27;total&#x27;: 12, &#x27;message&#x27;: &#x27;Has desbloqueado 3 de 12 logros posibles&#x27;}}}]

                            </div>
                        </details>

                        <!-- Acciones -->
                        <div class="preview-actions">
                            
                            <a href="/courses/content/anuncio/edit/" class="btn btn-primary btn-preview-action">
                                <i class="bi bi-pencil me-1"></i>Editar Bloque
                            </a>
                            <a href="/courses/content/anuncio/duplicate/" class="btn btn-warning btn-preview-action">
                                <i class="bi bi-copy me-1"></i>Duplicar
                            </a>
                            

                            <a href="/courses/content/" class="btn btn-outline-secondary btn-preview-action">
                                <i class="bi bi-arrow-left me-1"></i>Volver al Gestor
                            </a>

                            
                            <a href="/courses/content/anuncio/delete/" class="btn btn-danger btn-preview-action">
                                <i class="bi bi-trash me-1"></i>Eliminar
                            </a>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</div>

<style>
/* Estilos para la barra de navegación superior */
.navbar {
    border: 1px solid #dee2e6;
}

.navbar-nav .nav-link {
    color: #495057 !important;
    font-weight: 500;
    padding: 0.75rem 1rem;
    transition: color 0.15s ease-in-out;
}

.navbar-nav .nav-link:hover {
    color: #0d6efd !important;
}

.navbar-nav .nav-link i {
    width: 16px;
    text-align: center;
}

.dropdown-menu {
    border: 1px solid #dee2e6;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.dropdown-item {
    padding: 0.5rem 1.5rem;
    transition: background-color 0.15s ease-in-out;
}

.dropdown-item:hover {
    background-color: #f8f9fa;
}

.dropdown-item i {
    width: 16px;
    text-align: center;
}

/* Responsive adjustments */
@media (max-width: 991.98px) {
    .navbar-collapse {
        background-color: #f8f9fa;
        border-radius: 0.375rem;
        margin-top: 0.5rem;
        padding: 0.5rem 0;
    }

    .navbar-nav .nav-link {
        padding: 0.5rem 1rem;
    }
}

/* Active state for current page */
.navbar-nav .nav-link.active {
    color: #0d6efd !important;
    font-weight: 600;
}
</style>


            
            
                
<!-- Panel flotante de chat para incluir en base.html -->
<!-- Botón flotante para restaurar chat -->
<button id="chat-restore-btn" class="btn btn-primary rounded-circle d-flex align-items-center justify-content-center" style="display:none;">
    <i class="bi bi-chat-dots"></i>
</button>

<div id="chat-panel" class="docked card">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center chat-header">
        <span>
            <i class="bi bi-chat-dots me-2"></i>Chat
            <select id="chat-room-selector" class="form-select form-select-sm d-inline-block w-auto ms-2">
                <option value="" disabled selected>Selecciona una sala...</option>
            </select>
        </span>
        <div class="d-flex gap-1">
            <button id="go-chat-main-btn" class="btn btn-light btn-sm" title="Ir al chat principal">
                <i class="bi bi-box-arrow-up-right"></i>
            </button>
            <button id="toggle-dock-btn" class="btn btn-light btn-sm" title="Acoplar/desacoplar">
                <i class="bi bi-layout-sidebar-inset"></i>
            </button>
            <button id="toggle-chat-panel" class="btn btn-link text-white p-0" style="font-size:1.5rem; line-height:1;">
                &#8211;
            </button>
        </div>
    </div>

    <div id="chat-panel-body" class="chat-panel-body">
        <div id="chat-log">
            <div class="d-flex mb-2 justify-content-end">
                <div class="message-bubble outgoing">
                    <div class="small fw-bold mb-1">You</div>
                    <div class="message-content">¡Bienvenido al chat!</div>
                    <div class="message-time small mt-1 text-muted">Ahora</div>
                </div>
            </div>
            <div id="typing-indicator" class="typing-indicator">
                <span></span><span></span><span></span> escribiendo...
            </div>
        </div>
    </div>

    <div class="chat-info-containers d-flex flex-column">
        <div class="input-group">
            <input id="chat-message-input" type="text" class="form-control" placeholder="Escribe tu mensaje..." autocomplete="off">
            <button id="chat-message-submit" class="btn btn-primary">
                <i class="bi bi-send"></i>
            </button>
        </div>
    </div>
</div>
<script>
    // Force cache refresh - version 1.1
    function setPanelMode(mode) {
        const panel = document.getElementById('chat-panel');
        panel.classList.remove('fullscreen', 'docked');
        panel.classList.add(mode);
    }
    function isMobile() {
        return window.innerWidth <= 600;
    }
    document.addEventListener('DOMContentLoaded', async function() {
    const currentUserId = "";
        const panel = document.getElementById('chat-panel');
        const toggleDockBtn = document.getElementById('toggle-dock-btn');
        const toggleChatPanelBtn = document.getElementById('toggle-chat-panel');
        const restoreBtn = document.getElementById('chat-restore-btn');
        const goChatMainBtn = document.getElementById('go-chat-main-btn');
    const chatLog = document.getElementById('chat-log');
    const chatInput = document.getElementById('chat-message-input');
    const chatSubmit = document.getElementById('chat-message-submit');
    const roomSelector = document.getElementById('chat-room-selector');

        // Detecta si está en la página principal de chat
        function isChatMainPage() {
            return window.location.pathname.startsWith('/chat/room');
        }

        // Estado inicial del panel flotante
        let chatPanelState = localStorage.getItem('chatPanelState') || 'minimized';
        function applyPanelState(state) {
            if (isChatMainPage()) {
                setPanelMode('fullscreen');
                panel.classList.remove('hidden');
                restoreBtn.style.display = 'none';
            } else {
                setPanelMode('docked');
                if (state === 'minimized') {
                    panel.classList.add('hidden');
                    restoreBtn.style.display = 'flex';
                    restoreBtn.style.opacity = '1';
                } else {
                    panel.classList.remove('hidden');
                    restoreBtn.style.display = 'none';
                    restoreBtn.style.opacity = '0';
                }
            }
        }
        applyPanelState(chatPanelState);
        // Siempre mostrar funcionalidades completas en modo docked
        if (isMobile() && !isChatMainPage()) {
            setPanelMode('docked');
            // En móvil, mostrar siempre el contenido completo en docked
            const panelBody = document.querySelector('.chat-panel-body');
            const infoContainers = document.querySelector('.chat-info-containers');
            if (panelBody) panelBody.style.display = 'flex';
            if (infoContainers) infoContainers.style.display = 'flex';
        }
        toggleDockBtn.addEventListener('click', function() {
            if (panel.classList.contains('docked')) {
                setPanelMode('fullscreen');
                localStorage.setItem('chatPanelState', 'maximized');
            } else {
                setPanelMode('docked');
                localStorage.setItem('chatPanelState', 'docked');
            }
        });
        toggleChatPanelBtn.addEventListener('click', function() {
            panel.classList.add('hidden');
            restoreBtn.style.display = 'flex';
            restoreBtn.style.opacity = '1';
            localStorage.setItem('chatPanelState', 'minimized');
        });
        restoreBtn.addEventListener('click', function() {
            panel.classList.remove('hidden');
            restoreBtn.style.display = 'none';
            restoreBtn.style.opacity = '0';
            // Si está en la página principal de chat, restaurar pantalla completa
            if (isChatMainPage()) {
                setPanelMode('fullscreen');
                localStorage.setItem('chatPanelState', 'maximized');
            } else {
                setPanelMode('docked');
                localStorage.setItem('chatPanelState', 'docked');
            }

            // Reset unread count when panel is restored
            if (typeof lastRoomId !== 'undefined' && lastRoomId) {
                setTimeout(() => resetUnreadCount(lastRoomId), 500);
            }
        });
        window.addEventListener('resize', function() {
            if (isMobile() && !isChatMainPage()) {
                setPanelMode('docked');
                document.querySelector('.chat-panel-body').style.display = 'flex';
                document.querySelector('.chat-info-containers').style.display = 'flex';
            }
        });
        goChatMainBtn.addEventListener('click', function() {
            const currentRoom = roomSelector.value;
            if (currentRoom) {
                window.location.href = `/chat/room/${currentRoom}/`;
            } else {
                window.location.href = '/chat/room';
            }
        });

        // --- Obtener sala por defecto según historial de último acceso ---
        async function getLastRoom() {
            try {
                const response = await fetch('/chat/api/chat/last-room/', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'same-origin'
                });
                if (response.ok) {
                    const data = await response.json();
                    return data.room_name || 'global';
                }
            } catch (e) {
                console.error('Error fetching last room:', e);
            }
            return 'global';
        }

        let chatSocket = null;
        let reconnectTimeout = null;
        let intentionalClose = false;
        let typingTimeout = null;
        let isTyping = false;
        let isPageVisible = true;
        let unreadMessageCount = 0;
        let isWidgetActive = false;
        let widgetVisibilityObserver = null;
        let readReceiptTimeout = null;
        let lastRoomId = null; // Declare at the beginning to avoid initialization error

        async function loadRoomsAndSelectLast() {
            let lastRoom = await getLastRoom();
            try {
                const response = await fetch('/chat/api/chat/room-list/', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'same-origin'
                });
                if (response.ok) {
                    const data = await response.json();
                    roomSelector.innerHTML = '<option value="" disabled>Selecciona una sala...</option>';
                    data.rooms.forEach(room => {
                        const option = document.createElement('option');
                        option.value = room.id;
                        option.textContent = room.name;
                        roomSelector.appendChild(option);
                    });
                    // Check localStorage first for panel-specific last room
                    let selectedRoom = localStorage.getItem('chatPanelLastRoom') || lastRoom;

                    // Selecciona la sala por defecto si existe
                    if (selectedRoom && data.rooms.some(room => room.id == selectedRoom)) {
                        roomSelector.value = selectedRoom;
                        lastRoomId = selectedRoom;
                        console.log('Panel: Selected stored/last room:', selectedRoom);
                    } else if (lastRoom && data.rooms.some(room => room.id == lastRoom)) {
                        roomSelector.value = lastRoom;
                        lastRoomId = lastRoom;
                        localStorage.setItem('chatPanelLastRoom', lastRoom);
                        console.log('Panel: Selected API last room:', lastRoom);
                    } else if (data.rooms.length > 0) {
                        // Fallback to first available room
                        const firstRoom = data.rooms[0].id;
                        roomSelector.value = firstRoom;
                        lastRoomId = firstRoom;
                        localStorage.setItem('chatPanelLastRoom', firstRoom);
                        console.log('Panel: Selected first available room:', firstRoom);
                    }
                } else {
                    console.error('Panel: Failed to load rooms:', response.status);
                }
            } catch (e) {
                console.error('Panel: Error loading rooms:', e);
            }
        }

        // Ensure lastRoomId is initialized before calling loadRoomsAndSelectLast
        if (typeof lastRoomId === 'undefined') {
            lastRoomId = null;
        }
        await loadRoomsAndSelectLast();

        async function loadHistory(roomId) {
            chatLog.innerHTML = '';
            try {
                const response = await fetch(`/chat/api/chat/room-history/${roomId}/`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'same-origin'
                });
                if (response.ok) {
                    const data = await response.json();
                    if (Array.isArray(data.history)) {
                        data.history.forEach(msg => {
                            const isCurrentUser = msg.user_id == currentUserId;
                            const msgHtml = `<div class="d-flex mb-2 justify-content-${isCurrentUser ? 'end' : 'start'}">
                                <div class="message-bubble px-3 py-2 ${isCurrentUser ? 'outgoing text-white text-end' : 'incoming text-dark text-start'}" style="max-width: 75%; border-radius: 1.2em; background:${isCurrentUser ? '#007bff' : '#f8f9fa'};">
                                    <div class="small fw-bold mb-1">${msg.display_name || 'Usuario'}</div>
                                    <div class="message-content">${msg.content}</div>
                                    <div class="message-time small mt-1 text-muted">${msg.timestamp ? msg.timestamp.substring(11,19) : ''}</div>
                                </div>
                            </div>`;
                            chatLog.insertAdjacentHTML('beforeend', msgHtml);
                        });
                        chatLog.scrollTop = chatLog.scrollHeight;
                    }
                } else {
                    console.error('Panel: Failed to load history:', response.status);
                }
            } catch (e) {
                console.error('Panel: Error loading history:', e);
            }
        }

        function showTypingIndicator(userId, displayName) {
            const typingIndicator = document.getElementById('typing-indicator');
            if (!typingIndicator) return;
            typingIndicator.innerHTML = `<span></span><span></span><span></span> ${displayName} is typing...`;
            typingIndicator.style.display = 'block';
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.style.display = 'none';
            }
        }

        function handleHistoryCleared() {
            // Clear all messages from the chat log but keep the typing indicator
            const chatLog = document.getElementById('chat-log');
            const typingIndicator = document.getElementById('typing-indicator');
            chatLog.innerHTML = '';
            if (typingIndicator) {
                chatLog.appendChild(typingIndicator);
            }
            // Show a system message indicating history was cleared
            const systemMessage = document.createElement('div');
            systemMessage.className = 'text-center p-2';
            systemMessage.innerHTML = '<small class="text-muted">Chat history has been cleared</small>';
            chatLog.appendChild(systemMessage);
        }

        function resetUnreadCount(roomId) {
            if (!roomId || typeof roomId === 'undefined') return;

            fetch('/chat/api/chat/reset-unread/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]')?.value || ''
                },
                body: JSON.stringify({
                    'room_id': roomId
                }),
                credentials: 'same-origin'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    console.log(`Panel: Marked ${data.marked_read} messages as read for room ${roomId}`);
                    // Update the notification count in the header
                    if (window.updateNotificationCount) {
                        window.updateNotificationCount();
                    }
                    // Also trigger notification system refresh
                    if (window.NotificationManager && window.NotificationManager.forceRefresh) {
                        window.NotificationManager.forceRefresh();
                    }
                    // Dispatch custom event for other components
                    document.dispatchEvent(new CustomEvent('messagesMarkedAsRead', {
                        detail: { roomId: roomId, count: data.marked_read }
                    }));
                    // Update notification count immediately
                    if (window.updateNotificationFromWidget) {
                        window.updateNotificationFromWidget();
                    }
                    // Reset local unread counter
                    unreadMessageCount = 0;
                }
            })
            .catch(error => console.error('Panel: Error resetting unread count:', error));
        }

        function setupWidgetVisibilityObserver() {
            const panel = document.getElementById('chat-panel');
            if (!panel) return;

            // Disconnect existing observer
            if (widgetVisibilityObserver) {
                widgetVisibilityObserver.disconnect();
            }

            // Create new observer
            widgetVisibilityObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const wasActive = isWidgetActive;
                    isWidgetActive = entry.isIntersecting && isPageVisible && !panel.classList.contains('hidden');

                    console.log('Panel: Widget visibility changed:', {
                        isIntersecting: entry.isIntersecting,
                        isPageVisible,
                        isHidden: panel.classList.contains('hidden'),
                        isWidgetActive
                    });

                    // If widget became active and there are unread messages, mark them as read
                    if (isWidgetActive && !wasActive && unreadMessageCount > 0 && typeof lastRoomId !== 'undefined' && lastRoomId) {
                        console.log('Panel: Widget became visible, marking messages as read');
                        clearTimeout(readReceiptTimeout);
                        readReceiptTimeout = setTimeout(() => {
                            resetUnreadCount(lastRoomId);
                        }, 1000); // Wait 1 second to ensure user is actually reading
                    }
                });
            }, {
                threshold: 0.1, // Consider visible if at least 10% is visible
                rootMargin: '0px'
            });

            widgetVisibilityObserver.observe(panel);
        }

        function updateWidgetActiveState() {
            setupWidgetVisibilityObserver();
        }

        // Handle page visibility changes for smart read receipts
        document.addEventListener('visibilitychange', function() {
            isPageVisible = !document.hidden;
            console.log('Panel: Page visibility changed:', isPageVisible ? 'visible' : 'hidden');
            updateWidgetActiveState();
        });

        // Handle window focus/blur for better activity detection
        window.addEventListener('focus', function() {
            console.log('Panel: Window focused');
            isPageVisible = true;
            updateWidgetActiveState();

            // Mark messages as read when window gains focus and widget is visible
            if (isWidgetActive && unreadMessageCount > 0 && typeof lastRoomId !== 'undefined' && lastRoomId) {
                clearTimeout(readReceiptTimeout);
                readReceiptTimeout = setTimeout(() => {
                    resetUnreadCount(lastRoomId);
                }, 200); // Reduced to 200ms for faster response
            }
        });

        window.addEventListener('blur', function() {
            console.log('Panel: Window blurred');
            isPageVisible = false;
            updateWidgetActiveState();
        });

        // Handle widget state changes (minimize/maximize)
        toggleChatPanelBtn.addEventListener('click', function() {
            setTimeout(updateWidgetActiveState, 100);
        });

        toggleDockBtn.addEventListener('click', function() {
            setTimeout(updateWidgetActiveState, 100);
        });

        restoreBtn.addEventListener('click', function() {
            setTimeout(updateWidgetActiveState, 100);
        });

        // Enhanced mobile touch interactions
        function initializeMobileInteractions() {
            const isMobile = window.innerWidth <= 768;

            if (isMobile) {
                // Add swipe gesture for chat panel
                let startY = 0;
                let startX = 0;
                let isSwiping = false;

                const chatPanel = document.getElementById('chat-panel');
                const swipeIndicator = document.createElement('div');
                swipeIndicator.className = 'swipe-indicator';
                swipeIndicator.textContent = 'Swipe to close';
                document.body.appendChild(swipeIndicator);

                // Touch start
                chatPanel.addEventListener('touchstart', function(e) {
                    if (chatPanel.classList.contains('fullscreen')) {
                        startY = e.touches[0].clientY;
                        startX = e.touches[0].clientX;
                        isSwiping = true;
                    }
                }, { passive: true });

                // Touch move
                chatPanel.addEventListener('touchmove', function(e) {
                    if (!isSwiping || !chatPanel.classList.contains('fullscreen')) return;

                    const currentY = e.touches[0].clientY;
                    const currentX = e.touches[0].clientX;
                    const deltaY = currentY - startY;
                    const deltaX = Math.abs(currentX - startX);

                    // Only handle vertical swipes
                    if (deltaX < 50 && deltaY > 50) {
                        swipeIndicator.classList.add('show');
                        e.preventDefault(); // Prevent scrolling
                    } else {
                        swipeIndicator.classList.remove('show');
                    }
                }, { passive: false });

                // Touch end
                chatPanel.addEventListener('touchend', function(e) {
                    if (!isSwiping) return;

                    const endY = e.changedTouches[0].clientY;
                    const deltaY = endY - startY;

                    swipeIndicator.classList.remove('show');

                    // If swiped down more than 100px, close fullscreen
                    if (deltaY > 100 && chatPanel.classList.contains('fullscreen')) {
                        setPanelMode('docked');
                        // Add haptic feedback
                        if (navigator.vibrate) {
                            navigator.vibrate(50);
                        }
                    }

                    isSwiping = false;
                });

                // Add haptic feedback to buttons
                const buttons = document.querySelectorAll('button');
                buttons.forEach(button => {
                    button.addEventListener('touchstart', function() {
                        this.classList.add('haptic-feedback');
                        if (navigator.vibrate) {
                            navigator.vibrate(10);
                        }
                    });

                    button.addEventListener('touchend', function() {
                        this.classList.remove('haptic-feedback');
                    });
                });

                // Improve scrolling performance on mobile
                const chatLog = document.getElementById('chat-log');
                let scrollTimeout;

                chatLog.addEventListener('scroll', function() {
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(function() {
                        // Hide virtual keyboard when scrolling
                        document.activeElement.blur();
                    }, 150);
                }, { passive: true });

                // Handle orientation changes
                window.addEventListener('orientationchange', function() {
                    setTimeout(function() {
                        chatLog.scrollTop = chatLog.scrollHeight;
                        // Recalculate panel position
                        if (chatPanel.classList.contains('docked')) {
                            chatPanel.style.bottom = '20px';
                        }
                    }, 500);
                });

                // Prevent zoom on double tap
                let lastTouchEnd = 0;
                document.addEventListener('touchend', function(event) {
                    const now = Date.now();
                    if (now - lastTouchEnd <= 300) {
                        event.preventDefault();
                    }
                    lastTouchEnd = now;
                }, false);

                // Add pull-to-refresh for chat messages
                let pullStartY = 0;
                let isPulling = false;

                chatLog.addEventListener('touchstart', function(e) {
                    if (chatLog.scrollTop === 0) {
                        pullStartY = e.touches[0].clientY;
                        isPulling = true;
                    }
                }, { passive: true });

                chatLog.addEventListener('touchmove', function(e) {
                    if (!isPulling) return;

                    const pullDistance = e.touches[0].clientY - pullStartY;
                    if (pullDistance > 50) {
                        // Show refresh indicator
                        chatLog.style.transform = `translateY(${Math.min(pullDistance - 50, 60)}px)`;
                        e.preventDefault();
                    }
                }, { passive: false });

                chatLog.addEventListener('touchend', function(e) {
                    if (!isPulling) return;

                    const pullDistance = e.changedTouches[0].clientY - pullStartY;
                    chatLog.style.transform = '';

                    if (pullDistance > 100) {
                        // Trigger refresh
                        console.log('Pull to refresh triggered');
                        // Could reload messages or show new messages
                    }

                    isPulling = false;
                });
            }
        }

        // Initialize widget active state
        updateWidgetActiveState();
        initializeMobileInteractions();

        // Cleanup function for when widget disconnects
        function cleanupWidgetResources() {
            if (widgetVisibilityObserver) {
                widgetVisibilityObserver.disconnect();
                widgetVisibilityObserver = null;
            }
            if (readReceiptTimeout) {
                clearTimeout(readReceiptTimeout);
                readReceiptTimeout = null;
            }
        }

        // Global function to update notification count from widget
        window.updateNotificationFromWidget = function() {
            console.log('Widget: Updating notification count from widget');
            if (window.NotificationManager && window.NotificationManager.forceRefresh) {
                window.NotificationManager.forceRefresh();
            }
        };

        // Cleanup on page unload
        window.addEventListener('beforeunload', cleanupWidgetResources);

        async function connectSocketWithHistory(roomId) {
            if (typeof lastRoomId !== 'undefined' && roomId === lastRoomId) return; // No recargar si no cambió la sala

            // Validate room ID
            if (!roomId || roomId.trim() === '') {
                console.error('Cannot connect: Invalid room ID');
                return;
            }

            lastRoomId = roomId;
            await loadHistory(roomId);
            // Reset unread count when loading history
            setTimeout(() => resetUnreadCount(roomId), 500);

            if (chatSocket) {
                intentionalClose = true;
                chatSocket.close();
                intentionalClose = false;
            }
            if (reconnectTimeout) {
                clearTimeout(reconnectTimeout);
                reconnectTimeout = null;
            }
            const wsScheme = window.location.protocol === 'https:' ? 'wss' : 'ws';
            const wsPath = `${wsScheme}://${window.location.host}/ws/chat/${roomId}/`;
            console.log('Panel connecting to WebSocket:', wsPath);
            chatSocket = new WebSocket(wsPath);
            chatSocket.onmessage = function(e) {
                const data = JSON.parse(e.data);
                if (data.type === 'typing_start') {
                    if (data.user_id != currentUserId) {
                        showTypingIndicator(data.user_id, data.display_name);
                    }
                    return;
                }
                if (data.type === 'typing_stop') {
                    hideTypingIndicator();
                    return;
                }
                if (data.type === 'history_cleared') {
                    // Clear the chat history for all users in the room
                    handleHistoryCleared();
                    return;
                }
                if (data.message) {
                    const isCurrentUser = data.user_id == currentUserId;

                    // Track unread messages only if widget is not active
                    if (!isCurrentUser && !isWidgetActive) {
                        unreadMessageCount++;
                        console.log('Panel: Unread message count:', unreadMessageCount);
                    } else if (!isCurrentUser && isWidgetActive) {
                        // Widget is active, mark this message as read after a short delay
                        console.log('Panel: Widget active, will mark message as read');
                        clearTimeout(readReceiptTimeout);
                        readReceiptTimeout = setTimeout(() => {
                            if (typeof lastRoomId !== 'undefined' && lastRoomId && isWidgetActive) {
                                resetUnreadCount(lastRoomId);
                            }
                        }, 500); // Reduced to 0.5 seconds for faster confirmation
                    }

                    const msgHtml = `<div class="d-flex mb-2 justify-content-${isCurrentUser ? 'end' : 'start'}">
                        <div class="message-bubble px-3 py-2 ${isCurrentUser ? 'outgoing text-white text-end' : 'incoming text-dark text-start'}" style="max-width: 75%; border-radius: 1.2em; background:${isCurrentUser ? '#007bff' : '#f8f9fa'};">
                            <div class="small fw-bold mb-1">${data.display_name || 'Usuario'}</div>
                            <div class="message-content">${data.message}</div>
                            <div class="message-time small mt-1 text-muted">${data.timestamp ? data.timestamp.substring(11,19) : ''}</div>
                        </div>
                    </div>`;
                    chatLog.insertAdjacentHTML('beforeend', msgHtml);
                    chatLog.scrollTop = chatLog.scrollHeight;
                }
            };
            chatSocket.onclose = function(e) {
                // Solo reconectar si la sala sigue siendo la misma
                if (!intentionalClose && typeof lastRoomId !== 'undefined' && roomId === lastRoomId) {
                    reconnectTimeout = setTimeout(() => connectSocketWithHistory(roomId), 2000);
                }
            };

            chatSocket.onopen = function() {
                console.log('Panel: WebSocket connected, setting up visibility observer');
                // Setup visibility observer when WebSocket connects
                setTimeout(updateWidgetActiveState, 100);
            };
        }
        // Conectar al inicio después de cargar las salas
        setTimeout(() => {
            if (roomSelector.value && roomSelector.value !== '') {
                console.log('Panel: Connecting to initial room:', roomSelector.value);
                connectSocketWithHistory(roomSelector.value);
            } else {
                console.log('Panel: No room selected, waiting for user selection');
            }
        }, 1000); // Give time for room loading to complete

        roomSelector.addEventListener('change', function() {
            const newRoomId = roomSelector.value;
            if (newRoomId) {
                // Save to localStorage for persistence
                localStorage.setItem('chatPanelLastRoom', newRoomId);
                console.log('Panel: Saved room to localStorage:', newRoomId);

                connectSocketWithHistory(newRoomId);
                // Reset unread count when switching rooms
                setTimeout(() => resetUnreadCount(newRoomId), 1000);
            }
        });
        chatSubmit.addEventListener('click', function() {
            const message = chatInput.value.trim();
            if (message && chatSocket && chatSocket.readyState === WebSocket.OPEN) {
                chatSocket.send(JSON.stringify({ 'message': message }));
                chatInput.value = '';
            }
        });
        chatInput.addEventListener('keyup', function(e) {
            if (e.key === 'Enter') {
                chatSubmit.click();
            }
        });

        chatInput.addEventListener('input', function(e) {
            if (chatSocket && chatSocket.readyState === WebSocket.OPEN) {
                if (!isTyping) {
                    isTyping = true;
                    chatSocket.send(JSON.stringify({
                        'type': 'typing_start'
                    }));
                }
                clearTimeout(typingTimeout);
                typingTimeout = setTimeout(function() {
                    isTyping = false;
                    chatSocket.send(JSON.stringify({
                        'type': 'typing_stop'
                    }));
                }, 1000);
            }
        });
    });
</script>

            

            
            
                
<!-- ============================================================================
     INBOX GTD FLOATING BUTTON - GLOBAL ACCESS COMPONENT
     ============================================================================
     This template contains the HTML structure for the global inbox GTD
     floating button that provides quick access to inbox functionality from any page.

     Features:
     - Floating button with pulse animation
     - Expandable panel with quick capture form
     - Real-time statistics display
     - Toast notifications integration
     - Responsive design for all screen sizes
     - Accessibility features (keyboard navigation, ARIA labels)

     Dependencies:
     - Bootstrap 5.x
     - Bootstrap Icons
     - inbox_floating_button.css
     - inbox_floating_button.js

     ============================================================================ -->

<!-- Inbox GTD Floating Container -->
<div id="inboxFloatingContainer" class="inbox-floating-container">
    <!-- Floating Button -->
    <div class="inbox-floating-button" id="inboxFloatingButton" role="button" tabindex="0" aria-label="Abrir Inbox GTD (Ctrl+I)">
        <div class="inbox-button-content">
            <i class="bi bi-lightning-charge-fill inbox-icon-main" aria-hidden="true"></i>
            <span class="inbox-badge" id="inboxBadge" aria-label="Items pendientes en inbox">0</span>
        </div>
        <div class="inbox-pulse-ring" aria-hidden="true"></div>
    </div>

    <!-- Expandable Panel -->
    <div class="inbox-panel" id="inboxPanel" role="dialog" aria-labelledby="inboxPanelTitle" aria-hidden="true">
        <!-- Panel Header -->
        <div class="inbox-panel-header">
            <h3 class="inbox-panel-title" id="inboxPanelTitle">
                <i class="bi bi-inbox-fill" aria-hidden="true"></i>
                Inbox GTD
            </h3>
            <button class="inbox-panel-close" id="inboxPanelClose" aria-label="Cerrar panel de inbox">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>

        <!-- Quick Capture Form -->
        <form class="inbox-quick-form" id="inboxQuickForm">
            <div class="inbox-form-group">
                <label for="inboxQuickTitle">Título *</label>
                <input
                    type="text"
                    id="inboxQuickTitle"
                    name="title"
                    placeholder="¿Qué necesitas capturar?"
                    required
                    aria-describedby="titleHelp"
                    autocomplete="off"
                >
                <small id="titleHelp" class="form-text text-muted">Describe brevemente lo que quieres recordar o hacer</small>
            </div>

            <div class="inbox-form-group">
                <label for="inboxQuickDescription">Descripción (opcional)</label>
                <textarea
                    id="inboxQuickDescription"
                    name="description"
                    placeholder="Agrega más detalles si es necesario..."
                    rows="3"
                    aria-describedby="descHelp"
                ></textarea>
                <small id="descHelp" class="form-text text-muted">Información adicional para contextualizar el item</small>
            </div>

            <div class="inbox-form-actions">
                <button type="submit" class="inbox-btn-primary" id="inboxQuickSubmit">
                    <i class="bi bi-lightning-charge-fill" aria-hidden="true"></i>
                    Capturar
                </button>
                <button type="button" class="inbox-btn-secondary" onclick="window.open('/events/inbox/', '_blank')">
                    <i class="bi bi-box-arrow-up-right" aria-hidden="true"></i>
                    Ver Inbox
                </button>
            </div>
        </form>

        <!-- Statistics Section -->
        <div class="inbox-stats">
            <div class="inbox-stats-grid">
                <div class="inbox-stat-item">
                    <div class="inbox-stat-number" id="inboxStatTotal">0</div>
                    <div class="inbox-stat-label">Total</div>
                </div>
                <div class="inbox-stat-item">
                    <div class="inbox-stat-number" id="inboxStatUnprocessed">0</div>
                    <div class="inbox-stat-label">Pendientes</div>
                </div>
                <div class="inbox-stat-item">
                    <div class="inbox-stat-number" id="inboxStatProcessed">0</div>
                    <div class="inbox-stat-label">Procesados</div>
                </div>
                <div class="inbox-stat-item">
                    <div class="inbox-stat-number" id="inboxStatToday">0</div>
                    <div class="inbox-stat-label">Hoy</div>
                </div>
                <div class="inbox-stat-item">
                    <div class="inbox-stat-number" id="inboxStatRecent">0</div>
                    <div class="inbox-stat-label">Recientes</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Access Tooltip (shown on hover) -->
<div class="inbox-tooltip" id="inboxTooltip" role="tooltip" aria-hidden="true">
    <div class="inbox-tooltip-content">
        <strong>Inbox GTD</strong>
        <small>Captura rápida de ideas y tareas</small>
        <div class="inbox-tooltip-shortcut">
            <kbd>Ctrl</kbd> + <kbd>I</kbd>
        </div>
    </div>
</div>

<!-- ============================================================================
     ACCESSIBILITY ENHANCEMENTS
     ============================================================================ -->

<!-- Screen Reader Announcements -->
<div id="inboxAnnouncements" class="sr-only" aria-live="polite" aria-atomic="true"></div>

<!-- ============================================================================
     STYLE OVERRIDES (for specific customizations)
     ============================================================================ -->
<style>
/* Custom styles that complement the main CSS file */

/* Enhanced focus styles for better accessibility */
.inbox-floating-button:focus-visible {
    outline: 3px solid #007bff;
    outline-offset: 3px;
}

/* Loading animation for the submit button */
.inbox-btn-primary:disabled {
    opacity: 0.7;
    cursor: not-allowed;
}

/* Enhanced badge animation */
.inbox-badge {
    animation: badgePulse 2s infinite;
}

@keyframes badgePulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
    }
    50% {
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(220, 53, 69, 0.5);
    }
}

/* Tooltip styles */
.inbox-tooltip {
    position: absolute;
    bottom: 80px;
    right: 70px;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 12px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 1052;
    white-space: nowrap;
}

.inbox-tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    right: 20px;
    border: 5px solid transparent;
    border-top-color: rgba(0, 0, 0, 0.9);
}

.inbox-floating-button:hover + .inbox-tooltip,
.inbox-tooltip:hover {
    opacity: 1;
    visibility: visible;
}

.inbox-tooltip-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.inbox-tooltip-shortcut {
    margin-top: 4px;
    display: flex;
    gap: 2px;
    align-items: center;
}

.inbox-tooltip-shortcut kbd {
    background: rgba(255, 255, 255, 0.2);
    padding: 1px 4px;
    border-radius: 3px;
    font-size: 10px;
    font-weight: 500;
}

/* Screen reader only styles */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 8px 16px;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .inbox-tooltip {
        display: none;
    }

    .inbox-stats-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 480px) {
    .inbox-stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .inbox-form-actions {
        flex-direction: column;
    }

    .inbox-btn-secondary {
        margin-top: 8px;
    }
}
</style>

<!-- ============================================================================
     INITIALIZATION SCRIPT
     ============================================================================ -->
<script>
// Initialize tooltips and other Bootstrap components when document is ready
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Bootstrap tooltips if available
    if (typeof bootstrap !== 'undefined' && bootstrap.Tooltip) {
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    }

    // Add keyboard shortcut hint on first visit
    const hasSeenShortcut = localStorage.getItem('inboxGTD_shortcut_shown');
    if (!hasSeenShortcut) {
        setTimeout(() => {
            const tooltip = document.getElementById('inboxTooltip');
            if (tooltip) {
                tooltip.style.opacity = '1';
                tooltip.style.visibility = 'visible';
                setTimeout(() => {
                    tooltip.style.opacity = '0';
                    tooltip.style.visibility = 'hidden';
                }, 3000);
            }
            localStorage.setItem('inboxGTD_shortcut_shown', 'true');
        }, 3000);
    }
});
</script>
            
        </div>
        
    </main>

    
    <footer id="footer" class="footer">
        <div class="container">
            <div class="row justify-content-center text-center">
                <div class="col-12 col-md-8">
                    <div class="project-credits mb-2">
                        <div class="copyright">
                            &copy; Copyright <strong><span>Management360</span></strong>. Todos los derechos reservados
                        </div>
                    </div>
                    <div class="third-party-credits">
                        <div class="credits">
                            <p>Plantilla base: <strong>NiceAdmin</strong></p>
                            <p>&copy; Copyright <strong>NiceAdmin</strong>. All Rights Reserved</p>
                            <p>Diseñado por <a href="https://bootstrapmade.com/" rel="noopener noreferrer" target="_blank">BootstrapMade</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center" aria-label="Back to top">
        <i class="bi bi-arrow-up-short"></i>
    </a>

    
    <script src="/static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js" defer></script>
    <script src="/static/assets/vendor/apexcharts/apexcharts.min.js" defer></script>
    <script src="/static/assets/vendor/chart.js/chart.umd.js" defer></script>
    <script src="/static/assets/vendor/echarts/echarts.min.js" defer></script>
    <script src="/static/assets/vendor/quill/quill.js" defer></script>
    <script src="/static/assets/vendor/simple-datatables/simple-datatables.js" defer></script>
    <script src="/static/assets/vendor/tinymce/tinymce.min.js" defer></script>
    <script src="/static/assets/vendor/php-email-form/validate.js" defer></script>

    
    <script src="/static/assets/js/main.js" defer></script>

    
    
    <script src="/static/assets/js/notifications.js" defer></script>
    

    
    
    <script src="/static/assets/js/inbox_floating_button.js" defer></script>
    

    
    



    
    <script nonce="">
        document.addEventListener('DOMContentLoaded', function() {
            // Configuración de alertas
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                const closeButton = alert.querySelector('.btn-close');
                if (closeButton) {
                    closeButton.addEventListener('click', () => {
                        alert.style.transition = 'opacity 0.5s ease';
                        alert.style.opacity = '0';
                        setTimeout(() => alert.remove(), 500);
                    });
                }
                
                setTimeout(() => {
                    alert.style.transition = 'opacity 0.5s ease';
                    alert.style.opacity = '0';
                    setTimeout(() => alert.remove(), 500);
                }, 5000);
            });

            // Configuración del botón "Volver arriba"
            const backToTopButton = document.querySelector('.back-to-top');
            if (backToTopButton) {
                const toggleVisibility = () => {
                    backToTopButton.style.display = window.pageYOffset > 100 ? 'flex' : 'none';
                };

                window.addEventListener('scroll', toggleVisibility);
                toggleVisibility(); // Estado inicial
                
                backToTopButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
        });
    </script>
</body>
</html>