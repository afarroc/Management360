{% extends 'layouts/base.html' %}

{% block content %}
<style>
    .my_row_container {
        display: grid;
        grid-template-rows: 1fr 2fr;
        gap: 10px;
    }

    .my_col_container {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 10px;
    }

    .listbox-container {
        max-height: 300px;
        overflow: auto;
        background: white;
        padding: 0;
        list-style-type: none;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {

        let eventoSeleccionado = null;
        // Filtra específicamente los elementos con la clase '.evento'
        document.querySelector('.listbox-container').addEventListener('click', (event) => {
            if (event.target.classList.contains('evento')) {
                eventoSeleccionado = event.target.dataset.id;
            }});

        document.querySelector('#boton-edicion').addEventListener('click', async () => {
            if (eventoSeleccionado) {
                try {
                    const response = await fetch(`event_edit/${eventoSeleccionado}`);
                    if (response.ok) {
                        const data = await response.text();
                        // Actualiza el contenido del contenedor con el título del evento
                        document.querySelector('#contenedor-del-formulario').innerHTML = data;
                    } else {
                        console.error('Error en la solicitud:', response.status);
                    }
                } catch (error) {
                    console.error('Error en la solicitud:', error);
                }
            }
        });
    });


</script>
<h3>Panel</h3>

<div class="my_col_container">
    <div class="my_row_container">
        <div>
            <p>Botonera</p>
            <button id="boton-edicion">Editar Evento</button>
        </div>
        <div id="contenedor-del-formulario">
            <p>Panel de edicion</p>
        </div>
    </div>
    <div>
        <div>
            <h4>Panel Derecho</h4>
        </div>
        <div>
            <p>Eventos En Curso</p>
            <div class="listbox-container">
                <ul>
                    {% for event in events %}
                    <li class="evento" data-id="{{ event.id }}">{{ event.title }}</li>
                    {% endfor %}
                </ul>
            </div>
            <div>
                <section>
                    <p>Sección baja</p>
                </section>
            </div>
        </div>
        <div>
            <p>End</p>
        </div>
    </div>
</div>
{% endblock %}