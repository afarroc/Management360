{% extends 'layouts/base.html' %}

{% block content %}
<div class="pagetitle">
    <h1>{{title}}</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'event_panel' %}">Events</a></li>
            <li class="breadcrumb-item active">{{title}}</li>
        </ol>
    </nav>
</div><!-- End Page Title -->
<!-- Mensajes de confirmación y éxito -->
{% if messages %}
<div id="message-container" class="alert alert-info" role="alert">
    {% for message in messages %}
    <p{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</p>
        {% endfor %}
</div>
{% endif %}
<section class="section">

    
    <div class="row">

		<!-- Aquí va el código para mostrar los filtros -->
		<div class="col-lg-6">
            <div class="card">
                <div class="card-header">Filtros</div>
                <div class="card-body">
                    <h5 class="card-title">Filtrar Eventos</h5>
					<form method="POST" action="{% url 'events' %}" class="row g-3">
						{% csrf_token %}
						<div class="col-auto">
						  <label for="status" class="visually-hidden">Estado:</label>
			
						  <select id="status" name="status" class="form-select">
							<option value="">-- Selecciona un estado --</option>
							{% for status in statuses %}
							  <option value="{{ status.id }}" {% if status.id == request.session.filtered_status|default:'' %}selected{% endif %}>
								{{ status.status_name }}
							  </option>
							{% endfor %}
						  </select>
						  
			
						</div>
						<div class="col-auto">
						  <label for="date" class="visually-hidden">Fecha:</label>
						  <input type="date" id="date" name="date" class="form-control" value="{{ request.session.filtered_date|default:'' }}">
						</div>
						<div class="col-auto">
						  <div class="form-check">
							<input type="checkbox" name="cerrado" value="True" class="form-check-input" id="cerrado" {% if request.session.filtered_cerrado|default:'' %} checked {% endif %}>
							<label class="form-check-label" for="cerrado">Omitir Cerrados</label>
						  </div>
						</div>
						<div class="col-auto">
						  <button type="submit" class="btn btn-primary mb-3">Filtrar</button>
						</div>
					</form>
				</div>
            </div>
        </div>
        {% include 'layouts/includes/information/info_links_card.html' %}


        {% if events %}
            <!-- Aquí va el código para mostrar los eventos -->

		{% for event in events %}
		{% include 'events/event_card.html' %}
		{% endfor %}

        {% else %}
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">No hay elementos para mostrar.</h5>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>


{% endblock %}

