<div id="event-card-{{ event.id }}" class="col">
	<div class="card h-100 shadow-sm">
		<div class="card-header text-white" style="background-color: {{ event.event_status.color }};"></div>
		<div class="card-body">
			<p class="card-title text-center mb-1">{{ event.event_status.icon }} [{{ event.id }}]</p>
			<h5 class="card-title text-center mb-1">{{ event.title }}</h5>
			<p class="card-text mb-1">{{ event.description }}</p>
			<p class="card-text mb-1"><strong>Host:</strong> {{ event.host.username|title }}</p>
			<p class="card-text mb-1"><strong>Asignado a:</strong> {{ event.assigned_to.username|title }}.</p>
			<p class="card-text mb-1"><strong>Asistentes:</strong>
				{% for attendee in event.attendees.all %}
					{{ attendee.username|title }}{% if not forloop.last %},{% else %}.{% endif %}
				{% endfor %}
			</p>
			<form action="{% url 'change_event_status' event.id %}" method="POST" class="mb-1">
			{% csrf_token %}
				<div class="mb-1">
					<select name="new_status_id" class="form-select" aria-label="Default select example">
					{% for status in statuses %}
						<option value="{{ status.id }}" {% if status.id|stringformat:"s" == event.event_status.id|stringformat:"s" %}selected{% endif %}>
						{{ status.status_name }}
						</option>
					{% endfor %}
					</select>
				</div>
				<button type="submit" class="btn btn-outline-primary btn-sm">Cambiar Estado</button>
			{% if request.user.profile.role == 'SU' %}
			</form>
			<form action="{% url 'delete_event' event.id %}" method="POST" class="d-inline" onsubmit="return confirm('¿Estás seguro de que quieres eliminar este evento?');">
			{% csrf_token %}
				<button type="submit" class="btn btn-danger">
					<i class="bi bi-trash-fill"></i>
				</button>
			</form>
			{% endif %}
		</div>
		<div class="card-footer text-muted">
			<p class="card-text mb-1"><strong>Updated:</strong> {{ event.updated_at|date:"d-M H:i" }}</p>
			<p class="card-text mb-1"><strong>Created:</strong> {{ event.created_at|date:"d-M H:i" }}</p>
		</div>
	</div>
</div>
