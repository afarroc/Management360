{% extends "courses/base.html" %}

{% block title %}Guía de Navegación - Gestión de Contenido{% endblock %}

{% block course_content %}
<div class="courses-main-content fade-in-up">
    <div class="container">
        <!-- Header -->
        <div class="d-flex align-items-center mb-4">
            <h1 class="h2 mb-0"><i class="bi bi-compass me-2"></i>Guía de Navegación</h1>
        </div>

        <!-- Arquitectura General -->
        <div class="card border-0 shadow-sm mb-5">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-diagram-3 me-2"></i>Arquitectura del Sistema de Gestión</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5><i class="bi bi-person-badge text-primary me-2"></i>Roles de Usuario</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <strong class="text-primary">Estudiante:</strong>
                                <ul class="mt-1">
                                    <li>Ver cursos disponibles</li>
                                    <li>Inscribirse en cursos</li>
                                    <li>Acceder al contenido de aprendizaje</li>
                                    <li>Completar lecciones y evaluaciones</li>
                                    <li>Dejar reseñas</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5><i class="bi bi-person-gear text-success me-2"></i>Tutor:</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <strong class="text-success">Gestión de Cursos:</strong>
                                <ul class="mt-1">
                                    <li>Crear y editar cursos</li>
                                    <li>Organizar módulos y lecciones</li>
                                    <li>Configurar precios y publicación</li>
                                    <li>Ver analíticas de estudiantes</li>
                                </ul>
                            </li>
                        </ul>
                        <h5><i class="bi bi-shield-check text-danger me-2"></i>Administrador:</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <strong class="text-danger">Gestión Global:</strong>
                                <ul class="mt-1">
                                    <li>Administrar categorías</li>
                                    <li>Supervisar todos los cursos</li>
                                    <li>Gestionar usuarios</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Flujo de Navegación -->
        <div class="card border-0 shadow-sm mb-5">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0"><i class="bi bi-arrow-right-circle me-2"></i>Flujo de Navegación</h4>
            </div>
            <div class="card-body">
                <div class="navigation-flow">
                    <!-- Nivel 1: Categorías -->
                    <div class="flow-step mb-4">
                        <div class="step-header d-flex align-items-center mb-3">
                            <div class="step-number bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <strong>1</strong>
                            </div>
                            <h5 class="mb-0 ms-3">Categorías</h5>
                        </div>
                        <div class="step-content ms-5">
                            <p class="text-muted">Las categorías organizan los cursos por temas o especialidades.</p>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Acciones disponibles:</h6>
                                    <ul>
                                        <li><i class="bi bi-eye text-info me-1"></i>Ver cursos por categoría</li>
                                        <li><i class="bi bi-plus-circle text-success me-1"></i>Crear nueva categoría (Admin)</li>
                                        <li><i class="bi bi-pencil text-warning me-1"></i>Editar categoría (Admin)</li>
                                        <li><i class="bi bi-trash text-danger me-1"></i>Eliminar categoría (Admin)</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Rutas relacionadas:</h6>
                                    <ul class="text-muted">
                                        <li><code>/courses/</code> - Lista de cursos</li>
                                        <li><code>/courses/admin/categories/</code> - Gestión categorías</li>
                                        <li><code>/courses/category/<slug>/</code> - Cursos por categoría</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Nivel 2: Cursos -->
                    <div class="flow-step mb-4">
                        <div class="step-header d-flex align-items-center mb-3">
                            <div class="step-number bg-success text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <strong>2</strong>
                            </div>
                            <h5 class="mb-0 ms-3">Cursos</h5>
                        </div>
                        <div class="step-content ms-5">
                            <p class="text-muted">Los cursos son el contenedor principal del contenido educativo.</p>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Acciones disponibles:</h6>
                                    <ul>
                                        <li><i class="bi bi-eye text-info me-1"></i>Ver detalles del curso</li>
                                        <li><i class="bi bi-plus-circle text-success me-1"></i>Crear nuevo curso (Tutor)</li>
                                        <li><i class="bi bi-pencil text-warning me-1"></i>Editar curso (Tutor)</li>
                                        <li><i class="bi bi-list-ul text-primary me-1"></i>Gestionar contenido (Tutor)</li>
                                        <li><i class="bi bi-graph-up text-secondary me-1"></i>Ver analíticas (Tutor)</li>
                                        <li><i class="bi bi-check-circle text-success me-1"></i>Inscribirse (Estudiante)</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Rutas relacionadas:</h6>
                                    <ul class="text-muted">
                                        <li><code>/courses/manage/</code> - Gestión de cursos</li>
                                        <li><code>/courses/manage/create/</code> - Crear curso</li>
                                        <li><code>/courses/<slug>/</code> - Detalle del curso</li>
                                        <li><code>/courses/<slug>/enroll/</code> - Inscripción</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Nivel 3: Módulos -->
                    <div class="flow-step mb-4">
                        <div class="step-header d-flex align-items-center mb-3">
                            <div class="step-number bg-warning text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <strong>3</strong>
                            </div>
                            <h5 class="mb-0 ms-3">Módulos</h5>
                        </div>
                        <div class="step-content ms-5">
                            <p class="text-muted">Los módulos agrupan lecciones relacionadas dentro de un curso.</p>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Acciones disponibles:</h6>
                                    <ul>
                                        <li><i class="bi bi-plus-circle text-success me-1"></i>Crear módulo (Tutor)</li>
                                        <li><i class="bi bi-pencil text-warning me-1"></i>Editar módulo (Tutor)</li>
                                        <li><i class="bi bi-trash text-danger me-1"></i>Eliminar módulo (Tutor)</li>
                                        <li><i class="bi bi-arrows-move text-info me-1"></i>Reordenar módulos (Drag & Drop)</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Rutas relacionadas:</h6>
                                    <ul class="text-muted">
                                        <li><code>/courses/manage/<slug>/content/</code> - Gestión contenido</li>
                                        <li><code>/courses/manage/<slug>/modules/create/</code> - Crear módulo</li>
                                        <li><code>/courses/manage/<slug>/modules/<id>/edit/</code> - Editar módulo</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Nivel 4: Lecciones -->
                    <div class="flow-step mb-4">
                        <div class="step-header d-flex align-items-center mb-3">
                            <div class="step-number bg-danger text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <strong>4</strong>
                            </div>
                            <h5 class="mb-0 ms-3">Lecciones</h5>
                        </div>
                        <div class="step-content ms-5">
                            <p class="text-muted">Las lecciones son el contenido educativo individual dentro de los módulos.</p>
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Tipos de lección:</h6>
                                    <ul>
                                        <li><i class="bi bi-play-circle text-danger me-1"></i>Video</li>
                                        <li><i class="bi bi-file-text text-secondary me-1"></i>Texto</li>
                                        <li><i class="bi bi-question-circle text-warning me-1"></i>Quiz/Evaluación</li>
                                        <li><i class="bi bi-pencil-square text-info me-1"></i>Tarea/Assignment</li>
                                    </ul>
                                    <h6>Acciones disponibles:</h6>
                                    <ul>
                                        <li><i class="bi bi-plus-circle text-success me-1"></i>Crear lección (Tutor)</li>
                                        <li><i class="bi bi-pencil text-warning me-1"></i>Editar lección (Tutor)</li>
                                        <li><i class="bi bi-trash text-danger me-1"></i>Eliminar lección (Tutor)</li>
                                        <li><i class="bi bi-arrows-move text-info me-1"></i>Reordenar lecciones (Drag & Drop)</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6>Rutas relacionadas:</h6>
                                    <ul class="text-muted">
                                        <li><code>/courses/manage/<slug>/modules/<id>/lessons/create/</code></li>
                                        <li><code>/courses/manage/<slug>/modules/<id>/lessons/<id>/edit/</code></li>
                                        <li><code>/courses/<slug>/learn/</code> - Vista de aprendizaje</li>
                                        <li><code>/courses/<slug>/learn/<id>/</code> - Lección específica</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sistema de Drag & Drop -->
        <div class="card border-0 shadow-sm mb-5">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0"><i class="bi bi-arrows-move me-2"></i>Sistema de Drag & Drop</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>Funcionalidades:</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="bi bi-check-circle text-success me-2"></i>
                                <strong>Reordenar módulos:</strong> Arrastra módulos para cambiar su orden
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-check-circle text-success me-2"></i>
                                <strong>Reordenar lecciones:</strong> Arrastra lecciones dentro de módulos
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-check-circle text-success me-2"></i>
                                <strong>Actualización automática:</strong> Los cambios se guardan automáticamente
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-check-circle text-success me-2"></i>
                                <strong>Interfaz intuitiva:</strong> Indicadores visuales claros
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>Tecnologías utilizadas:</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <strong class="text-primary">SortableJS:</strong> Biblioteca JavaScript para drag & drop
                            </li>
                            <li class="mb-2">
                                <strong class="text-primary">AJAX:</strong> Actualización sin recargar la página
                            </li>
                            <li class="mb-2">
                                <strong class="text-primary">Django REST:</strong> Endpoints para reordenamiento
                            </li>
                            <li class="mb-2">
                                <strong class="text-primary">CSRF Protection:</strong> Seguridad en requests AJAX
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mapa de URLs -->
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-dark text-white">
                <h4 class="mb-0"><i class="bi bi-map me-2"></i>Mapa Completo de URLs</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>URLs Públicas:</h5>
                        <ul class="text-muted small">
                            <li><code>GET /courses/</code> - Lista de cursos</li>
                            <li><code>GET /courses/category/<slug>/</code> - Cursos por categoría</li>
                            <li><code>GET /courses/<slug>/</code> - Detalle del curso</li>
                            <li><code>POST /courses/<id>/enroll/</code> - Inscripción</li>
                            <li><code>GET /courses/<slug>/learn/</code> - Vista de aprendizaje</li>
                            <li><code>POST /courses/<id>/review/</code> - Agregar reseña</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>URLs de Gestión (Tutor/Admin):</h5>
                        <ul class="text-muted small">
                            <li><code>GET /courses/manage/</code> - Gestión de cursos</li>
                            <li><code>GET /courses/manage/<slug>/content/</code> - Gestión contenido</li>
                            <li><code>POST /courses/manage/<slug>/reorder-modules/</code> - AJAX reorder</li>
                            <li><code>GET /courses/admin/categories/</code> - Gestión categorías</li>
                            <li><code>POST /courses/manage/<slug>/modules/<id>/reorder-lessons/</code></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.flow-step {
    border-left: 4px solid #e9ecef;
    padding-left: 1rem;
    position: relative;
}

.flow-step::before {
    content: '';
    position: absolute;
    left: -8px;
    top: 20px;
    width: 12px;
    height: 12px;
    background: #6c757d;
    border-radius: 50%;
}

.step-number {
    border: 3px solid white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.card-header {
    font-weight: 600;
}

code {
    background: #f8f9fa;
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 0.875em;
}
</style>
{% endblock %}