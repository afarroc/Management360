{% extends "courses/cms_base.html" %}
{% load static %}

{% block title %}{{ title }} - Management360{% endblock %}

{% block extra_head %}
<!-- CSS para el Gestor de Contenido -->
<link rel="stylesheet" href="{% static 'css/content_manager.css' %}">
{% endblock %}

{% block extra_js %}
<!-- JavaScript para el Gestor de Contenido -->
<script src="{% static 'js/content_manager.js' %}"></script>
<script src="{% static 'js/content_manager_forms.js' %}"></script>
<script>
// Navegación de sidebar
document.addEventListener('DOMContentLoaded', function() {
    // Manejar navegación de sidebar
    document.querySelectorAll('.sidebar-link').forEach(link => {
        link.addEventListener('click', function(e) {
            // Remover clase active de todos
            document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
            // Agregar clase active al actual
            this.classList.add('active');
        });
    });
});
</script>
{% endblock %}

{% block cms_content %}
<!-- Header -->
<div class="content-blocks-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <h1><i class="bi bi-grid-3x3-gap me-3"></i>Gestor de Contenido</h1>
                <p class="lead mb-0 mt-2">
                    Sistema de gestión de bloques reutilizables
                </p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <div class="mt-4">
                    <i class="bi bi-house-door fs-1 text-white-50"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Contenido Principal -->
<div class="container">
    <!-- Estadísticas -->
    {% if user_blocks %}
    <div class="stats-section">
        <div class="stats-grid">
            <div class="stat-item">
                <span class="stat-number">{{ user_blocks|length }}</span>
                <span class="stat-label">Mis Bloques</span>
            </div>
            {% if featured_blocks %}
            <div class="stat-item">
                <span class="stat-number">{{ featured_blocks|length }}</span>
                <span class="stat-label">Destacados</span>
            </div>
            {% endif %}
            <div class="stat-item">
                <span class="stat-number">{{ total_blocks }}</span>
                <span class="stat-label">Total Público</span>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Bloques Recientes -->
    <div class="recent-blocks-section">
        {% include "courses/includes/content_manager_recent_blocks.html" %}
    </div>
</div>

<!-- Modal de Vista Previa -->
{% include "courses/includes/content_manager_modal.html" %}
{% endblock %}